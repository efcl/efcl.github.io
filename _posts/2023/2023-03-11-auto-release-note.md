---
title: "GitHubã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’è‡ªå‹•åŒ–ã™ã‚‹ä»•çµ„ã¿"
author: azu
layout: post
date: 2023-03-11T14:05
category: GitHub
tags:
  - GitHub
  - npm
---

GitHub ã®[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ã‚’ä½¿ã£ã¦ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®å†…å®¹ã‚’ PR ã«åŸºã¥ã„ã¦è‡ªå‹•ç”Ÿæˆã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œã‚Šã¾ã—ãŸã€‚

ä»Šã¾ã§ã¯ã€ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ«ãƒ¼ãƒ«ã§ã‚ã‚‹[Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/)ã¨[conventional-github-releaser](https://github.com/conventional-changelog/releaser-tools/tree/master/packages/conventional-github-releaser)ã‚’ä½¿ã£ã¦ã€ã‚³ãƒŸãƒƒãƒˆã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ã„ã¾ã—ãŸã€‚
ä»–ã®äººã® PR ã§ã‚‚ã€squah merge ã§ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›¸ãæ›ãˆã‚‹ã“ã¨ã§ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã—ãŸã€‚

ãŸã  GitHub ã«ä»•çµ„ã¿ã¯é•ã†ã‘ã©ã»ã¼ä¼¼ãŸã“ã¨ã‚’ã™ã‚‹[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ã¨ã„ã†æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ç§»è¡Œã—ã‚ˆã†ã¨æ€ã£ã¦ã€ãã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œã£ã¦ã„ã¾ã—ãŸã€‚

- [ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ - mizdra's blog](https://www.mizdra.net/entry/2022/07/08/181825)
- [ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆç®¡ç†è¡“](https://r7kamura.com/articles/2022-07-18-release-notes-management)
- [GitHub Actions ã§ã„ã„æ„Ÿã˜ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’å®Œå…¨è‡ªå‹•ã§ä½œæˆã™ã‚‹](https://zenn.dev/kshida/articles/auto-generate-release-note-with-calver)

## ç›®çš„

ç›®çš„ã¨ã—ã¦ã¯ã€æ¬¡ã‚’ç›®æ¨™ã«ã—ã¦ã„ã¾ã—ãŸã€‚

- Convential commit ã§ã‚„ã£ã¦ã„ã‚‹ã‚‚ã®ã‚’[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ãƒ™ãƒ¼ã‚¹ã«ç§»è¡Œã™ã‚‹

è‡ªåˆ†ã¯[å¤§é‡ã®ãƒªãƒã‚¸ãƒˆãƒª](https://efcl.info/surl/github-activity)ã‚’æŒã£ã¦ã„ã‚‹ã®ã§ã€æ®µéšçš„ã«ç§»è¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
Convential commitã¨[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ã¯åŒæ™‚ã«ä½¿ã£ã¦ã‚‚ç«¶åˆã¯ã—ãªã„ã®ã§ã€å®Ÿéš›ã«ã¯[Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/)ã§ã‚³ãƒŸãƒƒãƒˆã—ãªãŒã‚‰ã€ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã¨ãã« Convential commit ã‹[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ã©ã¡ã‚‰ã‚’ä½¿ã†ã‹ã‚’é¸æŠã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
(ãŸã¾ã«ã€PR ã‚’çµŒç”±ã›ãšã«ã‚³ãƒŸãƒƒãƒˆã—ã¡ã‚ƒã†ã“ã¨ãŒã‚ã‚‹ã®ã§ã€ãã‚Œã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã¨ãã¯[Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/)ãƒ™ãƒ¼ã‚¹ã«åˆ‡ã‚Šæ›¿ãˆã‚‹)

ã¾ãŸã€ä»Šå›ã¯ CI ã‹ã‚‰ã®è‡ªå‹•ãƒªãƒªãƒ¼ã‚¹ã¸ã¨åˆ‡ã‚Šæ›¿ãˆã‚‹ã®ã¯ã€ç›®çš„ã«ã—ã¾ã›ã‚“ã§ã—ãŸã€‚
npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ã‚’ CI ã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã«ã¯ã¾ã ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ãŒå¿…è¦ã«ãªã£ã¦ã—ã¾ã†ã®ã§ã€npm <-> GitHub é–“ã® OICD ãŒå®Ÿè£…ã•ã‚Œã¦ã‹ã‚‰è€ƒãˆã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

- [RFC for linking packages to their source and build by feelepxyz Â· Pull Request #626 Â· npm/rfcs](https://github.com/npm/rfcs/pull/626)
- [Automated publishing of npm packages from CI/CD Â· Issue #625 Â· npm/statusboard](https://github.com/npm/statusboard/issues/625)

ãŸã ã—ã€[textlint](https://github.com/textlint/textlint)ã‚„[Secretlint](https://github.com/secretlint/secretlint)ãªã©ã®å¤§ããª monorepo ã§ã¯ã€ä»Šå›ä½œã£ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ CI ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ãƒ•ãƒ­ãƒ¼ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€monorepo ã ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã‚ˆã‚Šã‚‚ã€CI ã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ã—ãŸæ–¹ãŒæ¥½ã ã£ãŸã‚Šã™ã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã§ã™(å˜ç´”ã«æ™‚é–“ãŒã‹ã‹ã£ãŸã‚Šã€ã‚¯ãƒªãƒ¼ãƒ³ãªç’°å¢ƒã§ãƒªãƒªãƒ¼ã‚¹ã—ãŸã„ãŸã‚)ã€‚

## GitHubã®[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)

GitHubã«ã¯[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ã¨è¨€ã†ã€Pull Requestã‹ã‚‰è‡ªå‹•çš„ã«ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®æ©Ÿèƒ½ã¯ã€æ¬¡ã®ã‚ˆã†ãªæ‰‹é †ã§åˆ©ç”¨ã§ãã¾ã™ã€‚

0. ãƒªãƒã‚¸ãƒˆãƒªã« `.github/release.yml` ã¨ã„ã†ãƒ©ãƒ™ãƒ«ã‚’ã‚«ãƒ†ã‚´ãƒ©ã‚¤ã‚ºã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚‹
1. PR ã«ãƒ©ãƒ™ãƒ«ã‚’è²¼ã‚‹
2. GitHub Releaseã§"Generate release notes"ã‚’å®Ÿè¡Œ or `gh release create --generate-notes` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹
3. ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒ‰ã«PRã®ãƒ©ãƒ™ãƒ«ã«åŸºã¥ã„ãŸã‚«ãƒ†ã‚´ãƒ©ã‚¤ã‚ºã•ã‚ŒãŸãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹

å®Ÿéš›ã«ç”Ÿæˆã•ã‚Œã‚‹ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã¯ã€æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚

- [Release v13.3.1 Â· textlint/textlint](https://github.com/textlint/textlint/releases/tag/v13.3.1)
- [Release v4.2.0 Â· textlint-rule/sentence-splitter](https://github.com/textlint-rule/sentence-splitter/releases/tag/v4.2.0)
- [Release v2.0.0 Â· textlint-ja/textlint-rule-no-hankaku-kana](https://github.com/textlint-ja/textlint-rule-no-hankaku-kana/releases/tag/v2.0.0)

åŸºæœ¬çš„ã«äº‹å‰ã«æº–å‚™ã™ã‚‹ã®ã¯`.github/release.yml`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã§ã™ã€‚

## `.github/release.yml`ã®è¨­å®š

å…ƒã‹ã‚‰`github-label-setup`ã¨ã„ã†ãƒ©ãƒ™ãƒ«ã‚’ã„ã„æ„Ÿã˜ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ä½¿ã£ã¦ã„ã¾ã—ãŸã€‚

- [azu/github-label-setup: ğŸ“¦ Setup GitHub label without configuration.](https://github.com/azu/github-label-setup)
- [GitHubã®ãƒ©ãƒ™ãƒ«ã‚’ã„ã„æ„Ÿã˜ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ãƒ„ãƒ¼ãƒ« | Web Scratch](https://efcl.info/2017/05/17/github-label/)

[github-label-setup v5.0.0](https://github.com/azu/github-label-setup/releases/tag/v5.0.0)ã§`.github/release.yml`ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚

ãã®ãŸã‚ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒªãƒã‚¸ãƒˆãƒªã«ãƒ©ãƒ™ãƒ«ã®ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’è¿½åŠ ã—ã¦ã€ãã®ãƒ©ãƒ™ãƒ«ã«å¯¾å¿œã—ãŸ`.github/release.yml`ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

```bash
npx @azu/github-label-setup --token "${AZU_GITHUB_TOKEN}" --allow-added-labels
npx @azu/github-label-setup --addReleaseYml
```

ã‚ã¨ã¯ã€ã“ã®ãƒ©ãƒ™ãƒ«ã‚’Pull Reuqestã«ã¤ã‘ã¦ã„ãã ã‘ã§ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®è‡ªå‹•ç”Ÿæˆæ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚

ğŸ“ è‡ªåˆ†ã®å ´åˆã¯ã€ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯æ¬¡ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è¡Œã£ã¦ã„ã¾ã™ã€‚
ãƒ©ãƒ™ãƒ«ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€`.github/release.yml`ã®ç”Ÿæˆã€ãƒªãƒã‚¸ãƒˆãƒªã®auto-merge/auto-branch-delete/discussionsã®æœ‰åŠ¹åŒ–ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

```bash
local GITHUB_TOKEN="GITHUB TOKEN" # $(op read "op://Private/GITHUB_TOKEN/token")
npx @azu/github-label-setup --token "${AZU_GITHUB_TOKEN}" --allow-added-labels
echo "âœ“ Add .github/release.yml"
npx @azu/github-label-setup --addReleaseYml
if git ls-files --others --exclude-standard | grep --color=auto ".github/release.yml" -q
then
  git add .github/release.yml
  git commit -m "CI: add .github/release.yml"
fi
echo "âœ“ Enable auto-branch-delete/auto-merge/discussions"
gh repo edit --delete-branch-on-merge --enable-auto-merge --enable-discussions
```

`gh repo edit --enable-discussions`ã¯ãªã‹ã£ãŸã®ã§å®Ÿè£…ã—ã¦[v2.22.0](https://github.com/cli/cli/releases/tag/v2.22.0)ã§è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ãƒ©ãƒ™ãƒ«ã®ã‚«ãƒ†ã‚´ãƒ©ã‚¤ã‚º

`.github/release.yml`ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚
`Type: *` ã®ãƒ©ãƒ™ãƒ«ã‚’åŸºæœ¬çš„ã«PRã®å¤‰æ›´å†…å®¹ã«åˆã‚ã›ã¦ã¤ã‘ã¦ã„ãã“ã¨ã§ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®ã‚«ãƒ†ã‚´ãƒ©ã‚¤ã‚ºãŒã§ãã¾ã™ã€‚

```yaml
changelog:
  exclude:
    labels:
      - 'Type: Meta'
      - 'Type: Question'
      - 'Type: Release'

  categories:
    - title: Security Fixes
      labels: ['Type: Security']
    - title: Breaking Changes
      labels: ['Type: Breaking Change']
    - title: Features
      labels: ['Type: Feature']
    - title: Bug Fixes
      labels: ['Type: Bug']
    - title: Documentation
      labels: ['Type: Documentation']
    - title: Refactoring
      labels: ['Type: Refactoring']
    - title: Testing
      labels: ['Type: Testing']
    - title: Maintenance
      labels: ['Type: Maintenance']
    - title: CI
      labels: ['Type: CI']
    - title: Dependency Updates
      labels: ['Type: Dependencies', "dependencies"]
    - title: Other Changes
      labels: ['*']
```

ä¾‹:

- æ©Ÿèƒ½è¿½åŠ : `Type: Feature`
- ãƒã‚°ä¿®æ­£: `Type: Bug`
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å¤‰æ›´: `Type: Documentation`
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°: `Type: Refactoring`

## ãƒªãƒã‚¸ãƒˆãƒªã®ç¨®é¡

åŸºæœ¬çš„ã«ã¯ã€GitHubãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®æ©Ÿèƒ½ãªã®ã§ãƒªãƒã‚¸ãƒˆãƒªã®ç¨®é¡ã¯é–¢ä¿‚ãªã„ã®ã§ã™ã€‚
ã—ã‹ã—ã€ãƒªãƒªãƒ¼ã‚¹ã¨åŒæ™‚ã«npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚å…¬é–‹ã™ã‚‹ãŸã‚ã€æ‰±ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã£ã¦å¾®å¦™ã«ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼ãŒå¤‰ã‚ã£ã¦ãã¾ã™ã€‚

è‡ªåˆ†ãŒæ‰±ã†ãƒªãƒã‚¸ãƒˆãƒªã¯å¤§ããåˆ†ã‘ã¦ã€2 ç¨®é¡ã®ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚Šã¾ã™ã€‚
ã“ã“ã§ã¯ã€ã©ã¡ã‚‰ã‚‚npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¬é–‹ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚

- å˜ä½“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ‰±ã†ãƒªãƒã‚¸ãƒˆãƒª
- monorepoãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ‰±ã†ãƒªãƒã‚¸ãƒˆãƒª

ã©ã¡ã‚‰ã‚‚åŒã˜æµã‚Œã§ã€[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ãƒ™ãƒ¼ã‚¹ã§ãƒªãƒªãƒ¼ã‚¹ã§ãã‚‹ã‚ˆã†ã«ç§»è¡Œã—ã¦ã„ã¾ã™ã€‚

## å˜ä½“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ‰±ã†ãƒªãƒã‚¸ãƒˆãƒª

å˜ä½“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ‰±ã†ãƒªãƒã‚¸ãƒˆãƒªã¯ã€æ¬¡ã®ã‚ˆã†ãªå½¢ã§npmã¸ã®publishã¨åŒæ™‚ã«ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’å…¬é–‹ã§ãã¾ã™ã€‚

```bash
# patchã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
$ npm version patch && npm publish && gh release create --generate-notes "$(git describe --tags --abbrev=0)"
# minorã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
$ npm version minor && npm publish && gh release create --generate-notes "$(git describe --tags --abbrev=0)"
# majorã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
$ npm version major && npm publish && gh release create --generate-notes "$(git describe --tags --abbrev=0)"
```

[npm-version](https://docs.npmjs.com/cli/v9/commands/npm-version)ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã¨ã€`package.json`ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã¨Git Tagã®ä½œæˆãŒåŒæ™‚ã«è¡Œã‚ã‚Œã¾ã™ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›´æ–°ã—ãŸã‚‰ã€`npm publish`ã§npmã¸ã®å…¬é–‹ã‚’è¡Œã„ã€`gh release create --generate-notes`ã§GitHubãƒªãƒªãƒ¼ã‚¹ã‚’è¡Œã„ã¾ã™ã€‚
[gh release create](https://cli.github.com/manual/gh_release_create)ã«ã¯ã‚¿ã‚°åãŒå¿…è¦ãªã®ã§ã€`git describe --tags --abbrev=0`ã§ã‚¿ã‚°åã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚

## monorepoãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ‰±ã†ãƒªãƒã‚¸ãƒˆãƒª

monorepoã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚åŸºæœ¬çš„ãªæµã‚Œã¯åŒã˜ã§ã™ã€‚
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å…¬é–‹ã«[Lerna](https://github.com/lerna/lerna)ã‚’ä½¿ã£ã¦ã‚‹ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

```bash
$ npx lerna version && npx lerna publish from-package && gh release create --generate-notes "$(git describe --tags --abbrev=0)"
```

`lerna version`ã§å¯¾è©±çš„ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒæŒ‡å®šã§ãã¾ã™ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ±ºã‚ãŸã‚‰ã€`lerna publish from-package`ã§npmã¸ã®å…¬é–‹ã‚’è¡Œã„ã€`gh release create --generate-notes`ã§GitHubãƒªãƒªãƒ¼ã‚¹ã‚’è¡Œã„ã¾ã™ã€‚

## CIã‹ã‚‰å…¬é–‹ã™ã‚‹monorepoãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ‰±ã†ãƒªãƒã‚¸ãƒˆãƒª

å…ˆã»ã©ã®ä¾‹ã¯ã©ã¡ã‚‰ã‚‚ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã„ã¦å…¬é–‹ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€

CIã‹ã‚‰å…¬é–‹ã™ã‚‹å ´åˆã«ã¯ã€ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³(patch, minor, major)ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã‹ã‚’ã©ã†é¸ã¶ã‹ãŒé›£ã—ã„å•é¡Œã«ãªã‚Šã¾ã™ã€‚
[Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/)ã®å ´åˆã¯ã€ã‚³ãƒŸãƒƒãƒˆã«ã‚ˆã£ã¦æ±ºã¾ã‚Šã¾ã™ãŒã€[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ã§ã¯ãã®ä»•çµ„ã¿ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ãã®ãŸã‚ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«é¸ã¶å½¢ or ãƒ©ãƒ™ãƒ«ã«ã‚ˆã£ã¦æ±ºã‚ã‚‹ã‹ã¨ã„ã†é¸æŠè‚¢ãŒã‚ã‚Šã¾ã™ã€‚
ä»Šå›ã¯ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸ã¶å½¢ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

æ¬¡ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã€CIã‹ã‚‰[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ã‚’ä½¿ã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å…¬é–‹ã¨ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ä½œã‚‹å®Ÿè£…ãŒã‚ã‚Šã¾ã™ã€‚

- [azu/monorepo-github-releases: monorepo release flow: lerna + GitHub Release's Automatically generated release notes](https://github.com/azu/monorepo-github-releases)

ãƒªãƒã‚¸ãƒˆãƒªã®READMEã«ã‚‚æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«ã€æ¬¡ã®ã‚ˆã†ãªãƒ•ãƒ­ãƒ¼ã§ãƒªãƒªãƒ¼ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã‚¹ãƒ†ãƒƒãƒ—:

1. PRã‚’ä½œæˆã™ã‚‹ãŸã‚ã®[create-release-pr.yml](https://github.com/azu/monorepo-github-releases/actions/workflows/create-release-pr.yml)ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã™ã‚‹
    - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã§ãã‚‹
    - ![Create Release Pull Request Image](https://raw.githubusercontent.com/azu/monorepo-github-releases/main/create-release-pr.png)
2. [CI] PRã‚’ä½œæˆã™ã‚‹
    - `lerna.json`ã®`version`ã¨`packages/*/package.json`ã®`version`ãŒæ›´æ–°ã•ã‚Œã‚‹
    - PRã®æœ¬æ–‡ã«[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ãŒè‡ªå‹•çš„ã«å…¥ã‚‹(APIã‚’å©ã„ã¦å–å¾—ã—ã¦ã‚‹)
3. PRã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹
    - PRã®æœ¬æ–‡ã‚’ä¿®æ­£ã§ãã¦ã€ãã®å†…å®¹ãŒãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«åæ˜ ã•ã‚Œã‚‹
4. PRã‚’ãƒãƒ¼ã‚¸ã™ã‚‹
5. [CI] npmã¨GitHub Releaseã«å…¬é–‹ã™ã‚‹
    - ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®å†…å®¹ã¯PRã®æœ¬æ–‡ã¨åŒã˜ã«ãªã‚‹
    - CIã§PRã®æœ¬æ–‡ã‚’å–å¾—ã—ã¦ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«åæ˜ ã™ã‚‹

5ã®publishã¯npm registryã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰æ™‚ã«å¤±æ•—ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
ãã®å ´åˆã¯ã€[.github/workflows/release.yml](https://github.com/azu/monorepo-github-releases/actions/workflows/release.yml)ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’Dispatchã™ã‚‹ã“ã¨ã§ã€5ã ã‘ã‚’å†å®Ÿè¡Œã§ãã¾ã™ã€‚
ã¾ãŸã€ç·Šæ€¥æ™‚ã«ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ã‚‚æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§å…¬é–‹ã§ãã¾ã™(ã“ã‚Œã‚‚ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™)ã€‚

```
$ npm run versionup && npm run release && gh release create --generate-notes "$(git describe --tags --abbrev=0)"
```

å®Ÿè£…ã¯ã€å…ˆã»ã©ã®ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰ã‚‚ã‚ã‹ã‚‹ã‚ˆã†ã«2ã¤ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ãªã£ã¦ã„ã¾ã™ã€‚

- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸ã‚“ã§ãƒªãƒªãƒ¼ã‚¹ç”¨ã®PRã‚’ä½œæˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼: https://github.com/azu/monorepo-github-releases/blob/main/.github/workflows/create-release-pr.yml
- npm publishã¨GitHubãƒªãƒªãƒ¼ã‚¹ã‚’ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼: https://github.com/azu/monorepo-github-releases/blob/main/.github/workflows/release.yml

ã“ã®å®Ÿè£…ã‚’ä½¿ã£ã¦ã‚‹ä¾‹ã¨ã—ã¦ã¯ã€æ¬¡ã®ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚Šã¾ã™ã€‚

- [textlint](https://github.com/textlint/textlint)
- [Secretlint](https://github.com/secretlint/secretlint)

ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã¯lernaã‚’ä½¿ã£ãŸmonorepoãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ãŒã€å˜ç‹¬ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚‚`lerna.json` -> `package.json`ã¸ã®å¤‰æ›´ã¨`ci:release`ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸­èº«ã‚’å¤‰ãˆã‚‹ã ã‘ã§å¯¾å¿œã§ãã¾ã™

- å˜ä½“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’CIã‹ã‚‰å…¬é–‹ã—ã¦ã‚‹ä¾‹: [pkgdeps/update-github-actions-permissions: A CLI that update GitHub Actions's `permissions` automatically](https://github.com/pkgdeps/update-github-actions-permissions)

ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹éš›ã«ä¸€åº¦PRã‚’çµŒç”±ã™ã‚‹ã“ã¨ã§ã€PRã‚’é€ã£ãŸäººã«ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å«ã¾ã‚Œã‚‹ã‹ã‚’æ˜ç¤ºã§ãã¾ã™(PRã«æ›¸ã‹ã‚ŒãŸãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®å†…å®¹ã«mentionãŒå…¥ã£ã¦ã‚‹ãŸã‚é€šçŸ¥ã•ã‚Œã‚‹)ã€‚

é¢å€’ãªäººç”¨ã«ã€æ—¢å­˜ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã“ã®CIã‹ã‚‰ã®ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼ã‚’å°å…¥ã™ã‚‹ãŸã‚ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚

```bash
curl -fsSL https://raw.githubusercontent.com/azu/monorepo-github-releases/main/migrate.sh | bash
```

ã“ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€æ¬¡ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã‚„ã£ã¦ãã‚Œã¾ã™ã€‚

- ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®è¿½åŠ 
- `npm run ci:*` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è¿½åŠ (CIã‹ã‚‰publishã™ã‚‹ã¨ãã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©ã—ã¦ã„ã‚‹)
- monorepoã¨å˜ç‹¬ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å¯¾å¿œ
- npmã¨yarnã«å¯¾å¿œ

## å®Ÿéš›ã«åˆ©ç”¨ã—ã¦ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰publishã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

ã“ã“ã¾ã§ã§ã€åŸºæœ¬çš„ãª[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ãƒ™ãƒ¼ã‚¹ã®ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚

ã—ã‹ã—ã€å®Ÿéš›ã«ã¯ã‚‚ã£ã¨è‰²ã€…ãªã“ã¨ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
æœ€å¾Œã«ã€å®Ÿéš›ã«ä½¿ã£ã¦ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

```bash
# conventional-github-releaserã‚’ä½¿ã£ã¦ãƒªãƒªãƒ¼ã‚¹
function releaseConventialGitHub(){
    local GITHUB_TOKEN=$(op read "op://Private/GITHUB_TOKEN/Section_xxx/token")
    CONVENTIONAL_GITHUB_RELEASER_TOKEN="${GITHUB_TOKEN}" conventional-github-releaser -p angular
}
# .github/release.ymlãŒã‚ã‚‹ã‹ã§åˆ†å²
function releaseGitHub(){
  # if FORCE_CONVENTIONAL is defined
  if [[ -n "${FORCE_CONVENTIONAL}" ]]; then
    echo "ğŸ¤– Use conventional-github-releaser"
    releaseConventialGitHub
    return 0
  fi
  # .github/release.ymlãŒã‚ã‚‹ã‹ã§åˆ†å²
  declare hasGitHubReleaseYaml
  hasGitHubReleaseYaml=$(([[ -f .github/release.yml ]] || [[ -f .github/release.yaml ]]) && echo "true" || echo "false")
  if [[ "${hasGitHubReleaseYaml}" == "true" ]]; then
    echo "ğŸ¤– Use gh release"
    gh release create --generate-notes "$(git describe --tags --abbrev=0)" --discussion-category "announcements"
  else
    echo "ğŸ¤– Use conventional-github-releaser"
    releaseConventialGitHub
  fi
}
# npm
function _confirm-npm(){
  # .github/release.ymlãŒã‚ã‚‹ã‹ã§åˆ†å²
  declare hasGitHubReleaseYaml
  hasGitHubReleaseYaml=$(([[ -f .github/release.yml ]] || [[ -f .github/release.yaml ]]) && echo "true" || echo "false")
  if [[ "${hasGitHubReleaseYaml}" == "true" ]]; then
    echo "ğŸ” å‰å›ã®ãƒªãƒªãƒ¼ã‚¹ä»¥é™ã«ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã€ãƒ©ãƒ™ãƒ«ãŒã¤ã„ã¦ãªã„PRã‚’æ¤œç´¢ä¸­â€¦"
    echo "" # ç©ºæ”¹è¡Œ
    searchQuery="no:label merged:>$(gh release view --json createdAt --jq .createdAt)"
    noLabelPRs=$(gh pr list -s merged -S "${searchQuery}")
    if [[ -z "${noLabelPRs}" ]]; then
      echo "ğŸ‰ ãƒ©ãƒ™ãƒ«ãŒã¤ã„ã¦ãªã„PRã¯ã‚ã‚Šã¾ã›ã‚“"
      echo ""
    else
      echo "ğŸš¨ ãƒ©ãƒ™ãƒ«ãŒã¤ã„ã¦ãªã„PRãŒã‚ã‚Šã¾ã™"
      echo "ğŸš¨ ãƒ©ãƒ™ãƒ«ã‚’ã¤ã‘ã¦ãã ã•ã„"
      gh pr list -s merged -S "${searchQuery}" -w
      echo "" # ç©ºæ”¹è¡Œ
      return 1
    fi
  else
    echo "ğŸ¤– Use conventional-github-releaser"
  fi
  # Enterã‚’é€£æ‰“ã—ã¦ã¦ã‚‚ç„¡è¦–ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
  while true; do
    echo -n "ğŸ¤” npm publish to \033[036m$1\033[0m(y/N/c)?"
    read yn
    case $yn in
        [Yy]* ) return 0;;
        [Nn]* ) return 1;;
        # c ã‚’å…¥åŠ›ã™ã‚‹ã¨ conventional-github-releaser ã‚’ä½¿ã†
        [Cc]* ) export FORCE_CONVENTIONAL=1; echo "ğŸ¤– Use conventional-github-releaser"; return 0;;
         * ) echo " Please answer Y or N or C";;
    esac
  done
}

# Worflow
# 1. Check
# 2. Tagã‚’è²¼ã‚‹
# 3. Publishã™ã‚‹
# 3. Release Noteã‚’ä½œæˆ

# npmã«å…¬é–‹ã—ãªã„ãƒªãƒã‚¸ãƒˆãƒªç”¨
alias release-node-patch='_confirm-npm "Public" && pre-version-no-npm && npm version patch && post-version && releaseGitHub'
alias release-node-minor='_confirm-npm "Public" && pre-version-no-npm && npm version minor && post-version && releaseGitHub'
alias release-node-major='_confirm-npm "Public" && pre-version-no-npm && npm version major && post-version && releaseGitHub'
# npmã‚’publicã§å…¬é–‹ã™ã‚‹
alias npm-patch='_confirm-npm "Public" && pre-version && npm version patch && post-version && npm publish --access=public --otp=$(npm-get-otp) && releaseGitHub'
alias npm-minor='_confirm-npm "Public" && pre-version && npm version minor && post-version && npm publish --access=public --otp=$(npm-get-otp) && releaseGitHub'
alias npm-major='_confirm-npm "Public" && pre-version && npm version major && post-version && npm publish --access=public --otp=$(npm-get-otp) && releaseGitHub'
# npmã‚’privateã§å…¬é–‹ã™ã‚‹ - https://github.com/azu/scoped-modules-checker
alias private-npm-patch='_confirm-npm "Private" && scoped-modules-checker && pre-version && npm version patch && post-version && npm publish --access=restricted --otp=$(npm-get-otp) && releaseGitHub'
alias private-npm-minor='_confirm-npm "Private" && scoped-modules-checker && pre-version && npm version minor && post-version && npm publish --access=restricted --otp=$(npm-get-otp) && releaseGitHub'
alias private-npm-major='_confirm-npm "Private" && scoped-modules-checker && pre-version && npm version major && post-version && npm publish --access=restricted --otp=$(npm-get-otp) && releaseGitHub'
# npmã‚’betaã§å…¬é–‹ã™ã‚‹
alias npm-beta-release='_confirm-npm "Public" && pre-version && npm version prerelease --preid=beta && post-version && npm publish --tag beta --access=public --otp=$(npm-get-otp) && releaseGitHub'
alias npm-beta-patch='_confirm-npm "Public" && pre-version && npm version prepatch --preid=beta && post-version && npm publish --tag beta --access=public --otp=$(npm-get-otp) && releaseGitHub'
alias npm-beta-minor='_confirm-npm "Public" && pre-version && npm version preminor --preid=beta && post-version && npm publish --tag beta --access=public --otp=$(npm-get-otp) && releaseGitHub'
alias npm-beta-major='_confirm-npm "Public" && pre-version && npm version premajor --preid=beta && post-version && npm publish --tag beta --access=public --otp=$(npm-get-otp) && releaseGitHub'
# monorepoç”¨ã®ã‚³ãƒãƒ³ãƒ‰
# require "versionup" && "release" command
alias npm-monorepo-release='_confirm-npm "Public" && opr npm run versionup && npm run release -- --yes --otp=$(npm-get-otp) && gh release create --generate-notes "$(git describe --tags --abbrev=0)" --discussion-category "announcements"'

# publishå‰ã«è‰²ã€…ãƒã‚§ãƒƒã‚¯ã™ã‚‹å‡¦ç† - è‡ªç”±ã«è¿½åŠ ã§ãã‚‹
alias pre-version='git diff --exit-code && npm run --if-present build && git diff --exit-code && npm test && git diff --exit-code'
alias post-version='git push && git push --tags'
alias pre-version-no-npm='git diff --exit-code && npm prune && npm install -q --no-shrinkwrap && npm test && git diff --exit-code'

# 1passwordçµŒç”±ã§TOTPã‚’å–å¾—
alias npm-get-otp='op item get --otp XXXX'
```

ã‚ã¡ã‚ƒãã¡ã‚ƒè‰²ã€…å®šç¾©ã—ã¦ã„ã¾ã™ãŒã€`npm-{patch,minor,major}` ãŒå˜ç‹¬ã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¬é–‹ã™ã‚‹ã¨ãã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚

ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯ã€æ¬¡ã®ã‚ˆã†ãªã“ã¨ã‚’ã‚„ã£ã¦ã„ã¾ã™

0. Publicã«å…¬é–‹ã™ã‚‹ã‹ã®ç¢ºèª
1. ãƒ©ãƒ™ãƒ«ãŒã¤ã„ã¦ãªã„PRã®ç¢ºèª -> ã‚ã‚‹å ´åˆã¯ãƒ©ãƒ™ãƒ«ãŒãªã„PRã®ä¸€è¦§ãŒé–‹ã‹ã‚Œã‚‹
2. [Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes) or [Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/)ã®ã©ã£ã¡ã§ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã‹é¸æŠ
3. git diffãŒãªã„ã‹ã€ãƒ“ãƒ«ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‹ã®ãƒã‚§ãƒƒã‚¯
4. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã¨ãƒªãƒªãƒ¼ã‚¹
5. ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®ä½œæˆ(Discussionã«ã‚‚æŠ•ç¨¿)

monorepoç”¨ã®`npm-monorepo-release`ã‚„private packageç”¨ã®`private-npm-{patch,minor,major}`ã‚‚ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯å¤§ä½“åŒã˜ã§ã™ã€‚

ç´°ã‹ã„å‡¦ç†ã‚’è‡ªåˆ†ã§æ›¸ããŸã‹ã£ãŸã®ã§æ›¸ã„ã¦ã„ã¾ã™ãŒã€å¤§ä½“ã®äººã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã¨ã‹ã§ã‚‚å•é¡Œãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
(ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ãŒå‡ºã‚‹å‰ã‹ã‚‰ã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã„ã¦ã€ä¸­èº«ã‚’é©å®œæ›¸ãæ›ãˆã¦ã„ã‚‹)

- [sindresorhus/np: A better `npm publish`](https://github.com/sindresorhus/np)
- [release-it/release-it: ğŸš€ Automate versioning and package publishing](https://github.com/release-it/release-it)

## ã¾ã¨ã‚

GitHubã®[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ãƒ™ãƒ¼ã‚¹ã®ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚

æœ€åˆã«æ›¸ã„ã¦ã„ãŸã‚ˆã†ã«æ—¢å­˜ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’å…¨ã¦ç§»è¡Œã™ã‚‹äºˆå®šã¯ãªã„ã®ã§ã€å¿…è¦ã«ãªã£ãŸã‚‰ãã®éƒ½åº¦ **`.github/release.yml`ã®è¨­å®š**ã§æ›¸ã„ã¦ã„ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
å®Ÿéš›ã«ä½¿ã£ã¦ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè£…ã—ã¦ã„ã¾ã—ãŸãŒ[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ã¨[Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/)ã¯å…±å­˜ã§ãã¾ã™ã€‚
ãã®ãŸã‚ã€å®Ÿéš›ã«ã¯ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã«ã©ã¡ã‚‰ã®æ–¹æ³•ã‚’ä½¿ã†ã‹ã‚’é¸æŠã—ã¦ã„ã¾ã™ã€‚

[Automatically generated release notes](https://docs.github.com/en/repositories/releasing-projects-on-github/automatically-generated-release-notes)ãƒ™ãƒ¼ã‚¹ã¯PRã‚’çµŒç”±ã—ãªã„ã¨ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«å…¥ã‚‰ãªã„ã¨ã„ã†å•é¡ŒãŒã‚ã‚‹ã®ã§ã€mainãƒ–ãƒ©ãƒ³ãƒã«pushã—ã¾ãã£ã¦ã„ã‚‹ã‚ˆã†ãªãƒªãƒã‚¸ãƒˆãƒªã ã¨[Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/)ã®æ–¹ãŒé©åˆ‡ã ã£ãŸã‚Šã—ã¾ã™ã€‚

å°†æ¥ã€npmã®OICDé€£æºãªã©ãŒããŸã‚‰ã¾ãŸå¤‰ã‚ã‚‹æ°—ãŒã—ã¾ã™ã€‚
ãã®ãŸã‚å¤‰æ›´ã«å¯¾å¿œã—ã‚„ã™ã‚ˆã†ã«ã€åŸºæœ¬çš„ã«ã¯ã‚³ãƒãƒ³ãƒ‰ã‚’`&&`ã§ç¹‹ã„ã§å®Ÿè£…ã§ãã‚‹ã‚ˆã†ãªã‚‚ã®ã‚’æ›¸ã„ã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚