---
title: "Remix v2ã¸ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸæ™‚ã®ãƒ¡ãƒ¢"
author: azu
layout: post
date : 2023-10-14T22:53
category: JavaScript
tags:
    - JavaScript
    - Remix

---

[Remix](https://remix.run/)ã‚’ä½¿ã£ã¦ä½œã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Remix v2ã¸ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸæ™‚ã®ãƒ¡ãƒ¢ã§ã™ã€‚

- [Remix v2 | Remix](https://remix.run/blog/remix-v2)
- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰: [Upgrading to v2 | Remix](https://remix.run/docs/en/main/start/v2)

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ Remix + Cloudflare Pages ã§å‹•ã‹ã—ã¦ã‚‹ã‚¢ãƒ—ãƒªã€‚

## [serverBuildTarget](https://remix.run/docs/en/main/start/v2#serverbuildtarget)ã®å¤‰æ›´

çµæ§‹å‰ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ç”Ÿæˆã—ãŸã‚¢ãƒ—ãƒªã ã£ãŸã®ã§ã€ãã‚Œãã‚Œã®ãƒ“ãƒ«ãƒ‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®è¨­å®šæ–¹æ³•ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã€‚
V2ã§ã¯ã€ã“ã®åˆæœŸå€¤ãŒçµæ§‹å¤‰ã‚ã‚‹ã®ã§ã€æ¬¡ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã—ã¦ãƒ“ãƒ«ãƒ‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«åˆã‚ã›ãŸã‚‚ã®ã‚’è¨­å®šã™ã‚‹ã€‚

- [serverBuildTarget](https://remix.run/docs/en/main/start/v2#serverbuildtarget)

Cloudflare Pageså‘ã‘ã®ãƒ“ãƒ«ãƒ‰ã‚’ã™ã‚‹ã®ã§ã€`remix.config.js`ã«æ¬¡ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ã€‚
ã“ã®è¨­å®šã¯V1ã§ã‚‚å‹•ãã®ã§ã€ã¾ãšã¯ã“ã‚Œã§å‹•ã‹ã™ã€‚(`future.v2_dev`ãŒæœ‰åŠ¹ã§ã‚ã‚‹å¿…è¦ã¯ã‚ã£ãŸã®ã‹ã‚‚ã€‚å¿˜ã‚Œã¦ã„ã‚‹)

```diff
/** @type {import('@remix-run/dev').AppConfig} */
module.exports = {
-  serverBuildTarget: "cloudflare-pages",
   server: "./server.js",
   ignoredRouteFiles: [".*", "**/*.test.*"],
+  publicPath: "/build/", // default value, can be removed
+  serverBuildPath: "functions/[[path]].js",
+  serverConditions: ["worker"],
+  serverDependenciesToBundle: "all",
+  serverMainFields: ["browser", "module", "main"],
+  serverMinify: true,
+  serverModuleFormat: "esm", // default value in 2.x, can be removed once upgraded
+  serverPlatform: "neutral",
};
```

## `future.v2_XXX`ã‚’ä½¿ã£ã¦v1ã®ã¾ã¾ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹

Remix ã§ã¯ V1ã«ãƒ•ãƒ©ã‚°ä»˜ãã§V2ã®æ©Ÿèƒ½ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚
ãã®ãŸã‚ã€V2ã«ä¸Šã’ã‚‹å‰ã«ã€V1ã®ã¾ã¾V2ã®æŒ™å‹•ã«ãã‚Šã‹ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

V1ã®æœ€æ–°ã¾ã§ã‚ã’ã¦ã€`remix watch`ã‚’ã—ã¦èµ·å‹•ã™ã‚‹Deprecation Warningã‚’è¦‹ãªãŒã‚‰ã€`v2_XXX`ãƒ•ãƒ©ã‚°ã‚’æœ‰åŠ¹åŒ–ã—ã¦ã„ãã€‚

åŸºæœ¬çš„ã«ã¯è­¦å‘Šã‚’è¦‹ã¦ã€ä¸€ã¤ãšã¤`v2_headers`ãªã©ã®ãƒ•ãƒ©ã‚°ã‚’æœ‰åŠ¹åŒ–ã—ã¦å‹•ãã‹ã‚’ç¢ºèªã—ã¦ã„ãã€‚

```diff
/** @type {import('@remix-run/dev').AppConfig} */
module.exports = {
    ...
+    future: {
+        v2_headers: true
+    }
}
```
      
ãƒ«ãƒ¼ã‚¿ãƒ¼ã®å¤‰æ›´ä»¥å¤–ã¯ã€ãã‚“ãªã‚„ã‚‹ã“ã¨ã¯ãªã‹ã£ãŸã®ã§ãƒ•ãƒ©ã‚°ã‚’æœ‰åŠ¹åŒ–ã—ã¦å‹•ã„ã¦ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãã‚‰ã„ã ã£ãŸã€‚
(Metaã¯ã¡ã‚‡ã£ã¨æ›¸ãæ–¹ãŒå¤‰ã‚ã£ã¦ãŸã‘ã©ã‚ã‚“ã¾ã‚Šä½¿ã£ã¦ãªã‹ã£ãŸ)

```diff
/** @type {import('@remix-run/dev').AppConfig} */
module.exports = {
+    future: {
+        v2_headers: true
+        v2_meta: true,
+        v2_headers: true,
+        v2_errorBoundary: true,
+        v2_dev: true,
+        v2_normalizeFormMethod: true
+    }
}
```

### ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å¯¾å¿œ

Remix v2ã§ã¯Flat Routesã¨ã„ã†ã®ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãªã£ã¦ã„ã‚‹ã€‚

- [Flat Routes Â· remix-run/remix Â· Discussion #4482](https://github.com/remix-run/remix/discussions/4482)

ã“ã®å¤‰æ›´ã‚’å¯¾å¿œã™ã‚‹ã®ã¯é›£ã—ã™ãã‚‹ã®ã§ã€V1ã¨åŒã˜ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å‹•ä½œã‚’ã™ã‚‹ `@remix-run/v1-route-convention` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã“ã¨ã«ã—ãŸã€‚

- [Preparing for v2 (v1.19.3) | Remix](https://remix.run/docs/en/1.19.3/pages/v2#file-system-route-convention)

æ¬¡ã®ã‚ˆã†ã«ã€ãƒ•ãƒ©ã‚°ã¨`@remix-run/v1-route-convention`ã‚’ä½¿ã†ã¨V1ã¨åŒã˜ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å‹•ä½œã‚’ã™ã‚‹ã€‚

```diff
+ const { createRoutesFromFolders } = require("@remix-run/v1-route-convention");
/** @type {import('@remix-run/dev').AppConfig} */
module.exports = {
    ...
    future: {
        v2_headers: true
        v2_meta: true,
        v2_headers: true,
        v2_errorBoundary: true,
        v2_dev: true,
        v2_normalizeFormMethod: true
+       v2_routeConvention: true,
    },
+    routes(defineRoutes) {
+      // uses the v1 convention, works in v1.15+ and v2
+      return createRoutesFromFolders(defineRoutes);
+    },
}
```

ã“ã®æ™‚ã«ãªãœã‹ã‚µãƒ¼ãƒãŒç«‹ã¡ä¸ŠãŒã‚‰ãªãã£ã¦ã€Cloudflareå´ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒã§ã‚ã‚‹workerdãŒã‚¨ãƒ©ãƒ¼ã‚’åã„ã¦ã„ãŸã€‚

```
workerd/util/symbolizer.c++:99: warning: Not symbolizing stack traces because $LLVM_SYMBOLIZER is not set. To symbolize stack traces, set $LLVM_SYMBOLIZER to the location of the llvm-symbolizer binary. When running tests under bazel, use `--test_env=LLVM_SYMBOLIZER=<path>`.
*** Fatal uncaught kj::Exception: kj/async-io-unix.c++:945: failed: ::bind(sockfd, &addr.generic, addrlen): Address already in use; toString() = 0.0.0.0:8788
stack: /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@31cdfba /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@31cdd5f /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@31cbfc5 /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@168a085 /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@168aa00 /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@164afdd /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@164fd47 /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@164fac4 /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@164faac /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@32061de /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@3205ddd /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@32040c8 /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@3203e8a /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@1640293 /lib/x86_64-linux-gnu/libc.so.6@24082 /workspaces/app/node_modules/@cloudflare/workerd-linux-64/bin/workerd@164002d
âœ˜ [ERROR] MiniflareCoreError [ERR_RUNTIME_FAILURE]: The Workers runtime failed to start. There is likely additional logging output above.
```

- åŒæ§˜ã®Issue: [ğŸ› BUG: &quot;warning: Not symbolizing stack traces because $LLVM_SYMBOLIZER is not set&quot; Â· Issue #3631 Â· cloudflare/workers-sdk](https://github.com/cloudflare/workers-sdk/issues/3631)

ã‚¨ãƒ©ãƒ¼ã«ç´›ã‚Œã¦ã‚ã‹ã‚Šã«ãã„ã‘ã©ã€`failed: ::bind(sockfd, &addr.generic, addrlen): Address already in use; toString() = 0.0.0.0:8788`ã¨ãªã£ã¦ã‚‹ã‚ˆã†ã«ãªãœã‹8788ãƒãƒ¼ãƒˆãŒã™ã§ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãŸã€‚

å®Ÿéš›ã«ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã™ã§ã«æ­¢ã¾ã£ã¦ã‚‹ã¯ãšã® `workerd` ã‚„ `node` ãŒæ®‹ã£ã¦ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã€ã“ã‚Œã‚’æ­¢ã‚ã‚‹ã¨è§£æ±ºã—ãŸã€‚

ã“ã“ã¾ã§ã§ã€feature flagã‚’ä½¿ã£ã¦V2ã®æ©Ÿèƒ½ãŒV1ã§å‹•ãã‚ˆã†ã«ãªã£ãŸã€‚

### `node:assert` ãŒãªã„ã‚¨ãƒ©ãƒ¼

ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ã€`node:assert`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã‚‹ã“ã¨ãŒã‚ã£ãŸã€‚
ã“ã‚Œã¯ã€`app/`ä»¥ä¸‹ã«`app/routes/app.test.ts`ã®ã‚ˆã†ãªãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨èµ·ãã¦ã„ãŸã€‚

```
ignoredRouteFiles: [".*", "**/*.test.*"],
```

ã§ç„¡è¦–ã•ã‚Œã‚‹ã¯ãš(å°‘ãªãã¦ã‚‚ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹å‰ã¯å•é¡Œãªã‹ã£ãŸ)ãªã®ã«ã€ç„¡è¦–ã•ã‚Œãªããªã£ã¦ã„ãŸã€‚
ã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€`app/routes`ä»¥ä¸‹ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãã®ã‚’ã‚„ã‚ã¦è§£æ±ºã—ãŸ

## Remix V2ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã‚‹ã€‚

ã¾ã ã€remixã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯`v1.x.x`ã®ã¾ã¾ãªã®ã§ã€`v2.x.x`ã«ä¸Šã’ã‚‹ã€‚

```json
    "@remix-run/cloudflare": "^2.0.1",
    "@remix-run/cloudflare-pages": "^2.0.1",
    "@remix-run/dev": "^2.0.1",
    "@remix-run/eslint-config": "~2.0.1",
    "@remix-run/react": "^2.0.1",
    "@remix-run/serve": "~2.0.1",
    "@remix-run/v1-route-convention": "^0.1.4",
```

ã‚ã’ã¿ã‚‹ã¨ `context.env` ãŒå‚ç…§ã§ããªããªã£ã¦ã€Cloudflare KVãŒå‚ç…§ã§ããªããªã£ãŸã€‚
[unstorage](https://github.com/unjs/unstorage#-unstorage)ã‚’ä½¿ã£ã¦ã„ãŸã®ã§ã€`context.env.KV_NAME`ãŒundefinedã«ãªã£ã¦ã€bindingãŒå‚ç…§ã§ããªãã¦æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã„ãŸã€‚

```
 Invalid binding STORAGE: undefined``
```

Remixã¯`server.js`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã”ã¨ã®ã‚µãƒ¼ãƒã®è¨­å®šãŒã‚ã‚‹ã®ã§ã€ã“ã‚ŒãŒå£Šã‚Œã‚‹é›°å›²æ°—ã ã£ãŸã€‚
ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ã‚’èª­ã‚€ã¨ã€Custom app serverã‚’ä½¿ã£ã¦ã‚‹å ´åˆ(Cloudflare Pagesã¨ã‹å¤§ä½“å…¨éƒ¨ã‚«ã‚¹ã‚¿ãƒ ã¨ã„ã†æ‰±ã„ã ã¨æ€ã†)ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¦‹ã¦ç›´ã—ã¦ã­ã¨ã‚ã£ãŸã€‚

> If you are using your own app server (server.js), then check out our templates for examples of how to integrate with v2_dev or follow these steps:
> 
> https://remix.run/docs/en/main/start/v2#custom-app-server

Cloudflare Pagesã‚’ä½¿ã£ã¦ã‚‹ã®ã§ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰`server.ts`ã®å†…å®¹ã‚’ãã®ã¾ã¾ã‚³ãƒ”ãƒ¼ã—ãŸã€‚

- [remix/templates/cloudflare-pages/server.ts at main Â· remix-run/remix](https://github.com/remix-run/remix/blob/main/templates/cloudflare-pages/server.ts)

## ã‚³ãƒãƒ³ãƒ‰ã®å¤‰æ›´

`npm run dev`ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚‚ä»•çµ„ã¿ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å‚è€ƒã«ã‚³ãƒ”ãƒ¼ã—ã¦ç›´ã—ãŸ
KV Storageã‚‚ä½¿ã£ã¦ã‚‹ã‚ˆã†ãªæ¬¡ã®ã‚ˆã†ãªå½¢ã«ãªã£ãŸã€‚

```diff
-    "build": "cross-env NODE_ENV=production remix build",
-    "dev": "run-p dev:*",
-    "dev:remix": "cross-env NODE_ENV=development remix watch",
-    "dev:wrangler": "cross-env NODE_ENV=development wrangler pages dev ./public --kv KV_NAME --compatibility-date=2023-03-14",
-    "start": "cross-env NODE_ENV=production npm run dev:wrangler",
+    "build": "remix build",
+    "dev": "remix dev --manual -c \"npm run start\"",
+    "start": "wrangler pages dev --kv KV_NAME --compatibility-date=2023-06-21 ./public",
```

- https://github.com/remix-run/remix/blob/e35569ed5334c0c00ea5ecfdd881ff9e2dfb290b/templates/cloudflare-pages/package.json#L7-L8

ã“ã‚Œã§ã€`npm run dev`ã§Remix v2ã§èµ·å‹•ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

## `context.env`ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼

ã‚¢ãƒ—ãƒªè‡ªä½“ã¯å‹•ä½œã—ã¦ã„ã‚‹ãŒã€TypeScriptã®å‹ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã—ã¦ã„ãŸã€‚

Remixã®`AppLoadContext`ã®å‹å®šç¾©ãŒå¤‰ã‚ã£ã¦`unknown`ã«ãªã£ãŸã®ã§ã€`context.env.KV_NAME`ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã¨ãªã£ãŸã€‚

`AppLoadContext`ã®å®šç¾©ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€æ‹¡å¼µã—ãŸã„å ´åˆ[declaration merging](https://www.typescriptlang.org/docs/handbook/declaration-merging.html)ã‚’ä½¿ã£ã¦ã­ã¨ã‚ã£ãŸã€‚

- https://github.com/remix-run/remix/blob/e35569ed5334c0c00ea5ecfdd881ff9e2dfb290b/packages/remix-server-runtime/data.ts#L14-L22

```ts
/**
 * An object of unknown type for route loaders and actions provided by the
 * server's `getLoadContext()` function.  This is defined as an empty interface
 * specifically so apps can leverage declaration merging to augment this type
 * globally: https://www.typescriptlang.org/docs/handbook/declaration-merging.html
 */
export interface AppLoadContext {
    [key: string]: unknown;
}
```

ã‘ã©`remix.env.d.ts`ã§æ¬¡ã®ã‚ˆã†ã«æ‹¡å¼µã™ã‚‹ã¨ã€`loader`é–¢æ•°ã®è¿”ã‚Šå€¤ãŒ`Promise<any>`ã«ãªã£ãŸã‚ŠãŠã‹ã—ãªã“ã¨ã«ãªã£ãŸã€‚

```ts
/// <reference types="@remix-run/dev" />
/// <reference types="@remix-run/cloudflare-pages" />
/// <reference types="@cloudflare/workers-types" />
declare module "@remix-run/server-runtime" {
    export interface AppLoadContext {
        env: {
            KV_NAME: unknown;
        };
    }
}
```

ã“ã‚Œã¯ã€`@remix-run/server-runtime`ã‚’èª­ã¿è¾¼ã‚€å‰ã«ã€`AppLoadContext`ã‚’æ‹¡å¼µã—ã‚ˆã†ã¨ã—ã¦å£Šã‚Œã‚‹ã€èª­ã¿è¾¼ã¿é †ã®å•é¡Œã ã¨æ€ã†ã€‚
Workaroundã¨ã—ã¦ã¯ã€`@remix-run/server-runtime`ã‚’èª­ã¿è¾¼ã‚“ã§ã‹ã‚‰æ‹¡å¼µã™ã‚Œã°ã€èª­ã¿è¾¼ã¿é †ã®å•é¡Œã¯è§£æ±ºã™ã‚‹ã€‚

```ts
/// <reference types="@remix-run/dev" />
/// <reference types="@remix-run/cloudflare-pages" />
/// <reference types="@cloudflare/workers-types" />
import "@remix-run/server-runtime";
declare module "@remix-run/server-runtime" {
    export interface AppLoadContext {
        env: {
            KV_NAME: string;
        };
    }
}
```

- [azu/remix-AppLoadContext-interface-merging: declare merging break loader's return type in Remix. Workaround: import type before merging.](https://github.com/azu/remix-AppLoadContext-interface-merging#workaround)

ãŸã ã€declare mergingã®æŒ™å‹•ã«é ¼ã‚ŠãŸããªã‹ã£ãŸã®ã§ã€æ¬¡ã®ã‚ˆã†ãªãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’å®šç¾©ã—ã¦`env`ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ãªæ–¹æ³•ã«å¤‰æ›´ã—ãŸã€‚

```ts
import type { AppLoadContext } from "@remix-run/cloudflare";
export type MyAppLoadContext = {
    env: {
        KV_NAME: unknown;
    };
};

/**
 * Get env value
 * avoid to declare merging
 * @param context
 * @param key
 */
export const getEnv = (context: AppLoadContext, key: keyof MyAppLoadContext["env"]) => {
    return (context as MyAppLoadContext).env[key];
};
```

ã‚ã¨ã¯ã€å‹ã‚¨ãƒ©ãƒ¼ã‚’ç›´ã—ã¦ã„ãã ã‘ã ã£ãŸã€‚

ğŸ“ `loader`ã®å‹å®šç¾©ã¯2.0.1ã§ã¯ã¾ã å£Šã‚Œã¦ã‚‹ã®ã§2.1.0ã¨ã‹ã§ä¿®æ­£ã•ã‚Œã‚‹ã‚‰ã—ã„ã€‚

- [V2 issue: inferred type disappearing Â· Issue #7246 Â· remix-run/remix](https://github.com/remix-run/remix/issues/7246)

## ãŠã‚ã‚Šã«

Remixã®Future Flagã§V1ã®ã¾ã¾V2ã®æ©Ÿèƒ½ã‚’å€‹åˆ¥ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã„ã‘ã‚‹ã®ã¯è‰¯ã„ã¨æ€ã£ãŸã€‚

- [Future Proofing Your Remix App | Remix](https://remix.run/blog/future-flags)
- [Upgrading to v2 | Remix](https://remix.run/docs/en/main/start/v2)

ãŸã ã€`npm run dev`ã¨ã‹ã‚³ãƒãƒ³ãƒ‰ã®å¤‰æ›´ã‚„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã®å¤‰æ›´ã¯ã“ã†ã„ã†ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«æ··ãœã‚‹ã¨è¿·å­ã«ãªã‚‹ã®ã§ã‚„ã‚ãŸæ–¹ãŒã„ã„ã¨æ€ã£ãŸã€‚
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ç›®è¦–ã§ç¢ºèªã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ãã‚‹ã¿ãŸã„ãªã€ä½•ãŒæ­£è§£ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„çŠ¶æ³ã«ãªã£ãŸã€‚
ä»Šå›ã®ã‚¢ãƒ—ãƒªã¯è¨­å®šã¯ã»ã¨ã‚“ã©ã„ã˜ã£ã¦ãªã„ã‘ã©ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒã‹ãªã‚Šé›£ã—ããªã‚Šãã†ã€‚

çµæ§‹æ‰‹ä½œæ¥­æ„ŸãŒå¼·ã„ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã ã£ãŸã®ã§ã€codemodã¨ã‹ã§åŠåˆ†ãã‚‰ã„ã¯è‡ªå‹•åŒ–ã§ãã‚‹ã¨è‰¯ã„ãªã¨æ€ã£ãŸã€‚
ã‘ã©ã€Remixã¯codemodã¯è«¦ã‚ãŸã‚ˆã†ã§ã—ãŸã€‚

- [feat!(v2): remove codemod by pcattori Â· Pull Request #6918 Â· remix-run/remix](https://github.com/remix-run/remix/pull/6918)