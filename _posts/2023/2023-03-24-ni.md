---
title: "npm/yarn/pnpm/bunã‚’åŒã˜ã‚³ãƒãƒ³ãƒ‰ã§æ‰±ãˆã‚‹ ni ã®zshå®Ÿè£…ã‚’æ›¸ã„ãŸ"
author: azu
layout: post
date: 2023-03-24T22:21
category: JavaScript
tags:
  - JavaScript
  - Node.js
  - zsh
---

`ni`ã¨ã„ã† npm/yarn/pnpm/bun ã‚’åŒã˜ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«/ã‚¢ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚

- [antfu/ni: ğŸ’¡ Use the right package manager](https://github.com/antfu/ni)

ä»•çµ„ã¿çš„ã«ã¯ã€å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚„[Corepack](https://nodejs.org/api/corepack.html)ã§æ±ºã‚ã‚‰ã‚ŒãŸ`packageManager`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‹ã‚‰ã€ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã‚’ä½¿ã†ã‹ã‚’åˆ¤æ–­ã—ã¦ã„ã¾ã™ã€‚
ãŸã¨ãˆã°ã€`package-lock.json`ãŒã‚ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã‚‰ npm ã‚’ä½¿ã£ã¦ã‚‹ã®ã§ã€`ni`ã‚³ãƒãƒ³ãƒ‰ã¯ npm ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
ã¾ãŸã€`packageManager`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ`yarn@<version>`ã«ãªã£ã¦ã„ã‚‹å ´åˆã¯ã€`ni`ã‚³ãƒãƒ³ãƒ‰ã¯ yarn ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

ãªãœã“ã†ã„ã†ãƒ„ãƒ¼ãƒ«ãŒå¿…è¦ã«ãªã‚‹ã‹ã¨ã„ã†ã¨ã€npm ã‚„ yarn ãªã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã¯ã€ãã‚Œãã‚Œã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã®ã‚³ãƒãƒ³ãƒ‰ãŒç•°ãªã‚‹ãŸã‚ã§ã™ã€‚
ãŸã¨ãˆã°ã€npm ã§ã¯`npm install <pkg>`ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã§ãã¾ã™ãŒã€yarn ã§ã¯`yarn add <pkg>`ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã—ã¾ã™ã€‚

è‰²ã€…ãªã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚„ã£ã¦ã„ã‚‹ã¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ npm/yarn/pnpm/bun ãªã©ä½¿ã£ã¦ã‚‹ã‚‚ã®ãŒç•°ãªã‚‹ã®ã§ã€ã‚³ãƒãƒ³ãƒ‰ã‚’æ„è­˜ã—ã¦ä½¿ã„åˆ†ã‘ã‚‹å¿…è¦ãŒå‡ºã¦ãã¦å¤§å¤‰ã§ã™ã€‚
`ni`ã¯ã“ã‚Œã‚’`n?`ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ä¸€ã¤ã«ã¾ã¨ã‚ã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚

[antfu/ni](https://github.com/antfu/ni)ã‚’ä½¿ã†ã®ã‚‚è‰¯ã„ã¨æ€ã£ãŸã®ã§ã™ãŒã€Node.js ã§ã‚ã‚‹å¿…è¦æ€§ã‚‚ã‚ã‚“ã¾ã‚Šãªã„ã®ã¨ã€ãã‚Œãã‚ŒãŒã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã¦åå‰ãŒè¢«ã‚Šãã†ãªå•é¡ŒãŒæ°—ã«ãªã‚Šã¾ã—ãŸã€‚
ãŸã¨ãˆã°ã€`npm run`ã«ç›¸å½“ã™ã‚‹ã®ãŒ`nr`ã§ã€`npm upgrade`ã«ç›¸å½“ã™ã‚‹ã®ãŒ`nu`ã¨ã„ã†å½¢ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã ã¨ã€ã‚³ãƒãƒ³ãƒ‰ãŒå¢—ãˆã‚‹ã¨åˆ¥ã®ã‚³ãƒãƒ³ãƒ‰ã¨è¢«ã‚Šãã†ãªã®ã§ã€`ni run`ã®ã‚ˆã†ã«ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«ã—ãŸæ–¹ãŒã„ã„ã‹ãªã¨æ€ã„ã¾ã—ãŸã€‚

- [About `nix` - really reconsider renaming it Â· Issue #143 Â· antfu/ni](https://github.com/antfu/ni/issues/143)

ãã“ã§ã€zsh ã§å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚

## ni.zsh

å®Ÿè£…ã¯æ¬¡ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™ã€‚

- [azu/ni.zsh: Alternative `ni` written in zsh](https://github.com/azu/ni.zsh)

1 ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã®ã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ãªã®ã§ã€æ¬¡ã®ã‚ˆã†ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```sh
curl https://raw.githubusercontent.com/azu/ni.zsh/main/ni.zsh > ni.zsh
source ni.zsh
```

ã‚ã‚“ã¾ã‚Š zsh ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®é©åˆ‡ãªé…å¸ƒãŒã‚ã‹ã‚‰ãªã„ã®ã§ã€èª°ã‹ãŒã„ã„æ„Ÿã˜ã«ã—ã¦ãã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã‚ªãƒªã‚¸ãƒŠãƒ«ã®`ni`ã¨ã¯é•ã£ã¦ã€ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã§ã€`ni run`ã®ã‚ˆã†ã«ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```
ni                      -- install current package.json | npm installç›¸å½“
ni add <pkg>            -- add package                  | npm install <pkg>ç›¸å½“
ni remove <pkg>         -- remove packageã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€| npm uninstall <pkg>ç›¸å½“
ni run <script>         -- run scripts                  | npm run <script>ç›¸å½“
ni test                 -- run test script              | npm testç›¸å½“
ni upgrade              -- upgrade packages             | npm upgradeç›¸å½“
ni upgrade-interactive  -- upgrade package interactively| npmã«ã¯ãªã„ã®ã§npm-check -uã‚’ä½¿ã†
```

å†…éƒ¨çš„ã«ã¯ã€ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã¨`packageManager`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¦‹ã¦ã€ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã‚’ä½¿ã†ã‹ã‚’åˆ¤æ–­ã™ã‚‹ã®ã¯å¤§ä½“åŒã˜ã§ã™ã€‚
`ni <Tab>` ã§ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ Auto Complete ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

| ã‚³ãƒãƒ³ãƒ‰                 | npm             | yarn                       | pnpm             | bun            |
| ------------------------ | --------------- | -------------------------- | ---------------- | -------------- |
| `ni`                     | `npm install`   | `yarn install`             | `pnpm install`   | `bun install`  |
| `ni add <pkg>`           | `npm install`   | `yarn add`                 | `pnpm add`       | `bun add`      |
| `ni remove <pkg>`        | `npm uninstall` | `yarn remove`              | `pnpm remove`    | `bun remove`   |
| `ni run <script>`        | `npm run`       | `yarn run`                 | `pnpm run`       | `bun run`      |
| `ni test`                | `npm test`      | `yarn run test`            | `pnpm run test`  | `bun run test` |
| `ni upgrade`             | `npm upgrade`   | `yarn upgrade`             | `pnpm update`    | â—‹              |
| `ni upgrade-interactive` | `npm-check`     | `yarn upgrade-interactive` | `pnpm update -i` | â—‹              |

### Note

è‡ªåˆ†ãŒ Yarn v2+ã‚’ä½¿ã£ã¦ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã£ã¦ãªã„ã®ã§ã€Yarn v2+ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å¤šåˆ†å¯¾å¿œã§ãã¦ã¾ã›ã‚“ã€‚
ã¾ãŸã€pnpm ã¨ bun ã‚‚çµæ§‹é©å½“ã«æ›¸ã„ã¦ã„ã‚‹ã®ã§ã€å®Ÿéš›ã«å‹•ã„ã¦ã‚‹ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚ã“ã®è¾ºã¯ PR å¾…ã£ã¦ã„ã¾ã™ã€‚

ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§ã€1 ãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã§è‡ªåˆ†ã®ç”¨é€”ã«åˆã‚ã›ã¦åŠ å·¥ã—ã¦ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚
