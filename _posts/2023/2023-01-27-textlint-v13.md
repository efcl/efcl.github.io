---
title: "textlint v13.0.0 - ESMã§æ›¸ã‹ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«"
author: azu
layout: post
date : 2023-01-27T22:08
category: textlint
tags:
    - textlint
    - JavaScript

---

[textlint](https://textlint.github.io/) v13ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸï¼

- [textlint v13.0.0 Â· textlint](https://textlint.github.io/blog/2023/01/27/textlint-13.html)

textlint v13ã§ã¯ã€ECMAScript
Modules(ESM)ã§æ›¸ã‹ã‚ŒãŸrulesã‚„pluginsã‚’ç›´æ¥èª­ã¿è¾¼ã‚ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€`textlint`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸(ã‚³ãƒãƒ³ãƒ‰)ã‚’æ›¸ãç›´ã—ã¦ãŸã‚Šã€å†…éƒ¨çš„ã«æ–°ã—ã„APIã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ãŸã ã—ã€textlint
v12ã¨CLIã®äº’æ›æ€§ã¯ã‚ã‚‹ã¯ãšãªã®ã§ã€`textlint`ã‚’ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦ä½¿ã£ã¦ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç‰¹ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã©ã«å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

## Summary

**For textlint user**

æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã ã‘ã§ã™ï¼

    npm install textlint@13 --save-dev
    # or
    yarn install textlint@13 --dev

textlint 13.0.0 ã¯ Node.js 16ä»¥ä¸Šã‚’è¦æ±‚ã—ã¾ã™ã€‚ ãã®ãŸã‚ã€Node.js
14ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€Node.js 16ä»¥ä¸Šã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

- [Download | Node.js](https://nodejs.org/en/download/)

ğŸ“ ã¾ã Node.js14ã§ã‚‚å‹•ãã¯ã—ã¾ã™ãŒã€minor
updatesã§å‹•ã‹ãªããªã‚‹ã‚±ãƒ¼ã‚¹ãŒå‡ºã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

**For textlint rule creator**

textlint v13.0.0ã‹ã‚‰ã¯ã€ESMã§æ›¸ã‹ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã‚’ç›´æ¥èª­ã¿è¾¼ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ãã®ãŸã‚ã€ãƒ«ãƒ¼ãƒ«ã‚’ESMã§æ›¸ãå ´åˆã¯ã€CommonJSã«ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã—ãªãã¦ã‚‚ã€textlintã®ãƒ«ãƒ¼ãƒ«ã¨ã—ã¦å‹•ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

âš ï¸
[vscode-textlint](https://github.com/taichi/vscode-textlint)ãªã©ã®ã‚¨ãƒ‡ã‚£ã‚¿ã¯ã€CLIã§ã¯ãªã`textlint`ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚
äº’æ›æ€§ã®ãŸã‚ã«å¤ã„APIã‚‚textlint
v13ã§ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ãŒã€å¤ã„APIã¯ESMã§æ›¸ã‹ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
ãã®ãŸã‚ã€`textlint`ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã‚„ã‚¨ãƒ‡ã‚£ã‚¿ãªã©ã¯ã€æ–°ã—ã„APIã«åˆ‡ã‚Šæ›¿ã‚ã‚‹ã¾ã§ã€ESMã§æ›¸ã‹ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚

**For textlint module user**

`textlint`ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦åˆ©ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€æ–°ã—ã„APIã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

`textlint`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€[v12.3.0](https://github.com/textlint/textlint/releases/tag/v12.3.0)ã‹ã‚‰æ–°ã—ã„APIã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

æ–°ã—ã„APIã¯ã€`createLinter`ã¨`loadTextlintrc`ãªã©ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚‰ã®APIã¯å®Œå…¨ã«éåŒæœŸã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€ESMã§æ›¸ã‹ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

å¤ã„APIã¨ã—ã¦ã¯ã€`TextlintCore`, `TextLintEngine`,
`TextFixEngine`ãªã©ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚‰ã¯ã€ãƒ­ãƒ¼ãƒ‰éƒ¨åˆ†ãŒåŒæœŸå‡¦ç†ã§ã€Lintå‡¦ç†ãŒéåŒæœŸå‡¦ç†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚
ESMã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹éš›ã«ã€ãƒ­ãƒ¼ãƒ‰éƒ¨åˆ†ã‚‚å®Œå…¨ã«éåŒæœŸå‡¦ç†ã«ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸãŸã‚(Dynamic
Importã‚’ä½¿ã†ãŸã‚)ã€ã“ã‚Œã‚‰ã®å¤ã„APIã¯éæ¨å¥¨ã¨ãªã£ã¦ã„ã¾ã™ã€‚

ãŸã ã—ã€v13ã§ã¯ã€`TextlintCore`, `TextLintEngine`,
`TextFixEngine`ã®å¤ã„APIã‚‚äº’æ›æ€§ã®ãŸã‚æ®‹ã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã‚‰ã®å¤ã„APIã¯ã€v14ã§å‰Šé™¤ã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚

â„¹ï¸ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³:

- textlint v12.3.0 ã§ã¯ã€å¤ã„API(éæ¨å¥¨)ã¨æ–°ã—ã„APIã‚’åŒæ™‚ã«ã‚µãƒãƒ¼ãƒˆ
  - å¤ã„APIãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã—ãŸ
- textlint v13.0.0 ã§ã¯ã€å¤ã„API(éæ¨å¥¨)ã¨æ–°ã—ã„APIã‚’åŒæ™‚ã«ã‚µãƒãƒ¼ãƒˆ
  - æ–°ã—ã„APIãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã™ - CURRENT
- textlint v14.0.0 ã§ã¯ã€å¤ã„API(éæ¨å¥¨)ã‚’å‰Šé™¤
  - æ–°ã—ã„APIã®ã¿ãŒæ®‹ã‚Šã¾ã™

| API                         | Description                                          | Behavior                                        | Target Platform          | v13+                                                    |
| --------------------------- | ---------------------------------------------------- | ----------------------------------------------- | ------------------------ | ------------------------------------------------------- |
| cli                         | Command LIne Interface                               | Async                                           | Node.js                  | âœ… (Use `createLinter` and `loadTextlintrc` internally) |
| textlint                    | TextLintCoreã®ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ ã€€                        | Async                                           | Node.js/CommonJS         | âŒ Deprecated                                           |
| TextLintCore                | ã‹ãªã‚Šå¤ã„APIã§ã™ã€‚ @texltint/kernelã‚’ä½¿ã£ã¦ãã ã•ã„ | Node.js/CommonJS                                | âŒ Deprecated            |                                                         |
| TextLintEngine              | Lint Engine API. It load .textlintrc automaticaly    | â—‰ Loading is Sync <br>â—‰ Linting is Async        | Node.js/CommonJS         | âŒ Deprecated                                           |
| TextFixEngine               | Fix Engine API. It load .textlintrc automaticaly     | â—‰ Loading is Sync <br>â—‰ Fixing is Async         | Node.js/CommonJS         | âŒ Deprecated                                           |
| createLinter/loadTextlintrc | æ–°ã—ã„APIã§ã™ã€‚å®Œå…¨ã«éåŒæœŸ                          | â—‰ Loading is Async<br>â—‰ Linting/Fixing is Async | Node.js/CommonJS and ESM | âœ… Recommended                                          |

## New APIs

æ–°ã—ã„APIã®ç°¡å˜ãªç´¹ä»‹ã§ã™ã€‚

- `createLinter`:
  `linter`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚Linterã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯æ¬¡ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã£ã¦ã„ã¾ã™ã€‚
  - `lintFiles(files): Promise<TextlintResult[]>`:
    ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Lintã—ã¦ã€Lintãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚
  - `lintText(text, filePath): Promise<TextlintResult>`
    ãƒ†ã‚­ã‚¹ãƒˆã‚’Lintã—ã¦ã€Lintãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚
  - `fixFiles(files): Promise<TextlintFixResult[]>`
    ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Lintã—ã¦ã€Fixãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚
  - `fixText(text, filePath): Promise<TextlintFixResult>`
    ãƒ†ã‚­ã‚¹ãƒˆã‚’Lintã—ã¦ã€Fixãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚
    - `fixFiles` ã¨ `fixText`
      ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã‚‹ã®ã§ãªãã€æ›¸ãæ›ãˆãŸçµæœã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å«ã‚€Fixãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚
- `loadTextlintrc`:
  `.textlintrc`ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€Descriptorã¨ã„ã†è¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚
- `loadLinerFormatter` and `loadFixerFormatter`:
  ãã‚Œãã‚ŒLinterã¨Fixerã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™

### Examples

Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’Lintã¨ã—ã¦çµæœã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã™ã‚‹ä¾‹ã§ã™ã€‚

```ts
import { createLinter, loadLinterFormatter, loadTextlintrc } from "textlint";
// descriptor is a structure object for linter
// It includes rules, plugins, and options
const descriptor = await loadTextlintrc();
const linter = createLinter({
  descriptor,
});
const results = await linter.lintFiles(["*.md"]);
// textlint has two types formatter sets for linter and fixer
const formatter = await loadLinterFormatter({ formatterName: "stylish" });
const output = formatter.format(results);
console.log(output);
```

ã‚ˆã‚Šè©³ã—ã„ã‚µãƒ³ãƒ—ãƒ«ã‚„èª¬æ˜ã¯ã€æ¬¡ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [Use as Node Modules Â· textlint](https://textlint.github.io/docs/use-as-modules.html)

æ–°ã—ã„APIã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯ã€æ¬¡ã®Discussionã«æ›¸ãè¾¼ã‚“ã§ãã ã•ã„ã€‚

- [Feedback for new APIs Â· Discussion #968 Â· textlint/textlint](https://github.com/textlint/textlint/discussions/968)

## ChangeLog

ã“ã“ã‹ã‚‰ã¯ã€v13.0.0ã®å¤‰æ›´ç‚¹ã§ã™

### ğŸ”¥ Breaking Changes

- Node.js 16+ãŒå¿…è¦ã«ãªã‚Šã¾ã—ãŸ
- `textlint --init` ã¯ `.textlintrc.json` ã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ
  - v12ã¾ã§ã¯ `textlint --init` ã¯ `.textlintrc` ãƒ•ã‚¡ã‚¤ãƒ«(æ‹¡å¼µå­ãªã—)
    ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã—ãŸ
- `@textlint/ast-node-types`ã®å‹å®šç¾©ãŒæ”¹å–„ã•ã‚Œã¾ã—ãŸ
  - ä»Šã¾ã§ã¯ã€TxtNode/TxtParentNode/TxtTextNodeã®å‹å®šç¾©ã®ã¿ãŒå­˜åœ¨ã—ã¦ã„ã¾ã—ãŸ
  - `TxtPragraphNode`ãªã©ã®å€‹åˆ¥ã®Nodeã®å‹å®šç¾©ã‚‚è¿½åŠ ã—ã¾ã—ãŸ
  - åˆã‚ã›ã¦ã€`TxtTableNode`ã‚‚è¿½åŠ ã—ã¦ã„ã¾ã™
  - è©³ã—ãã¯[TxtAST Interface](https://textlint.github.io/docs/txtnode.html)ã¨[`@textlint/ast-node-types`](https://github.com/textlint/textlint/tree/master/packages/%40textlint/ast-node-types)ã‚’å‚ç…§ã—ã¦ãã ã•ã„
- New-CLIãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ãªã‚Šã€Old-CLIã¯å‰Šé™¤ã•ã‚Œã¾ã—ãŸ
  - New-CLIã¯[v12.3.0](https://github.com/textlint/textlint/releases/tag/v12.3.0)ã§opt-intã§å°å…¥ã•ã‚Œã¾ã—ãŸã€‚
  - New-CLIã¯`createLinter`/`loadTextlintrc`/`loadLinterFormatter`/`loadFixerFormatter`ã¨ã„ã£ãŸæ–°ã—ã„APIã‚’åˆ©ç”¨ã—ã¾ã™
  - ã“ã‚Œã¯ã€ESMã®ãƒ«ãƒ¼ãƒ«ã‚„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®å¤‰æ›´ã§ã™
  - Old-CLIã¯ä¸è¦ã¨ãªã£ãŸãŸã‚ã€å‰Šé™¤ã•ã‚Œã¾ã—ãŸ

#### Old-CLI ã¨ New-CLI ã®é•ã„

- New CLI ã¯ ESM rules/plugins ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚
- New CLI ã§ã¯  `--stdin` ã‚’æŒ‡å®šã™ã‚‹ã¨ãã« `--stdin-filename` ãŒå¿…é ˆã¨ãªã‚Šã¾ã—ãŸ
  - Old CLIã§ã¯ã€€`--stdin-filename` ã®æ‰±ã„ãŒã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ãªã£ã¦ã„ã¦ã€æ„å›³ã—ãªã„æŒ™å‹•ã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã—ãŸ
- çµ‚äº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ•´ç†ã—ã¾ã—ãŸ
  - ä»Šã¾ã§ã¯ `0`ã‹`1`ã§ã—ãŸã€‚
  - `0` æ­£å¸¸çµ‚äº†ã€`1` Lintã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ã€`2` ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãªã©ã®ç•°å¸¸çµ‚äº†ã¨ã„ã£ãŸã‚ˆã†ã«æ•´ç†ã—ã¦ã„ã¾ã™
  - è©³ç´°ã¯[Command Line Interface Â· textlint](https://textlint.github.io/docs/cli.html#exit-code)ã‚’å‚ç…§ã—ã¦ãã ã•ã„

### ğŸ†• Features

#### å€‹åˆ¥ã®Nodeã®å®šç¾©ã¨Table/TableRow/TableCell Nodeã®è¿½åŠ 

- æ–°ã—ãNodeã®å‹å®šç¾©ã‚’`@textlint/ast-node-types`ã«è¿½åŠ ã—ã¾ã—ãŸ
- Table/TableRow/TableCell node ã®å®šç¾©ã‚’ `@textlint/ast-node-types` ã«è¿½åŠ ã—ã¾ã—ãŸ

å‹å®šç¾©ã¯ã€[`@textlint/ast-node-types`](https://github.com/textlint/textlint/tree/master/packages/%40textlint/ast-node-types)ã‹ã‚‰åˆ©ç”¨ã§ãã¾ã™ã€‚

| Type name                       | Node type                        | Description                          |
| ------------------------------- | -------------------------------- | ------------------------------------ |
| ASTNodeTypes.Document           | TxtDocumentNode(TxtParentNode)   | Root Node                            |
| ASTNodeTypes.DocumentExit       | TxtDocumentNode(TxtParentNode)   |                                      |
| ASTNodeTypes.Paragraph          | TxtParagraphNode(TxtParentNode)  | Paragraph Node                       |
| ASTNodeTypes.ParagraphExit      | TxtParagraphNode(TxtParentNode)  |                                      |
| ASTNodeTypes.BlockQuote         | TxtBlockQuoteNode(TxtParentNode) | > Block Quote Node                   |
| ASTNodeTypes.BlockQuoteExit     | TxtBlockQuoteNode(TxtParentNode) |                                      |
| ASTNodeTypes.List               | TxtListNode(TxtParentNode)       | List Node                            |
| ASTNodeTypes.ListExit           | TxtListNode(TxtParentNode)       |                                      |
| ASTNodeTypes.ListItem           | TxtListItemNode(TxtParentNode)   | List (each) item Node                |
| ASTNodeTypes.ListItemExit       | TxtListItemNode(TxtParentNode)   |                                      |
| ASTNodeTypes.Header             | TxtHeaderNode(TxtParentNode)     | # Header Node                        |
| ASTNodeTypes.HeaderExit         | TxtHeaderNode(TxtParentNode)     |                                      |
| ASTNodeTypes.CodeBlock          | TxtCodeBlockNode(TxtParentNode)  | Code Block Node                      |
| ASTNodeTypes.CodeBlockExit      | TxtCodeBlockNode(TxtParentNode)  |                                      |
| ASTNodeTypes.HtmlBlock          | TxtHtmlBlockNode(TxtParentNode)  | HTML Block Node                      |
| ASTNodeTypes.HtmlBlockExit      | TxtHtmlBlockNode(TxtParentNode)  |                                      |
| ASTNodeTypes.Link               | TxtLinkNode(TxtParentNode)       | Link Node                            |
| ASTNodeTypes.LinkExit           | TxtLinkNode(TxtParentNode)       |                                      |
| ASTNodeTypes.Delete             | TxtDeleteNode(TxtParentNode)     | Delete Node(`~Str~`)                 |
| ASTNodeTypes.DeleteExit         | TxtDeleteNode(TxtParentNode)     |                                      |
| ASTNodeTypes.Emphasis           | TxtEmphasisNode(TxtParentNode)   | Emphasis(`*Str*`)                    |
| ASTNodeTypes.EmphasisExit       | TxtEmphasisNode(TxtParentNode)   |                                      |
| ASTNodeTypes.Strong             | TxtStrongNode(TxtParentNode)     | Strong Node(`**Str**`)               |
| ASTNodeTypes.StrongExit         | TxtStrongNode(TxtParentNode)     |                                      |
| ASTNodeTypes.Break              | TxtBreakNode                     | Hard Break Node(`Str<space><space>`) |
| ASTNodeTypes.BreakExit          | TxtBreakNode                     |                                      |
| ASTNodeTypes.Image              | TxtImageNode                     | Image Node                           |
| ASTNodeTypes.ImageExit          | TxtImageNode                     |                                      |
| ASTNodeTypes.HorizontalRule     | TxtHorizontalRuleNode            | Horizontal Node(`---`)               |
| ASTNodeTypes.HorizontalRuleExit | TxtHorizontalRuleNode            |                                      |
| ASTNodeTypes.Comment            | TxtCommentNode                   | Comment Node                         |
| ASTNodeTypes.CommentExit        | TxtCommentNode                   |                                      |
| ASTNodeTypes.Str                | TxtStrNode                       | Str Node                             |
| ASTNodeTypes.StrExit            | TxtStrNode                       |                                      |
| ASTNodeTypes.Code               | TxtCodeNode                      | Inline Code Node                     |
| ASTNodeTypes.CodeExit           | TxtCodeNode                      |                                      |
| ASTNodeTypes.Html               | TxtHtmlNode                      | Inline HTML Node                     |
| ASTNodeTypes.HtmlExit           | TxtHtmlNode                      |                                      |
| ASTNodeTypes.Table              | TxtTableNode                     | Table node. textlint 13+             |
| ASTNodeTypes.TableExit          | TxtTableNode                     |                                      |
| ASTNodeTypes.TableRow           | TxtTableRowNode                  | Table row node. textlint 13+         |
| ASTNodeTypes.TableRowExit       | TxtTableRowNode                  |                                      |
| ASTNodeTypes.TableCell          | TxtTableCellNode                 | Table cell node. textlint 13+        |
| ASTNodeTypes.TableCellExit      | TxtTableCellNode                 |                                      |

ä»Šã¾ã§ã¨åŒã˜ããƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã®ã¯TxtNode/TxtParentNode/TxtTextNodeã®ï¼“ã¤ã®Nodeã§ã™ã€‚
ä»Šå›`<h1>`ã®ã‚ˆã†ãªHeaderãªã‚‰`TxtHeaderNode`ã¨ã„ã£ãŸã‚ˆã†ã«å€‹åˆ¥ã®Nodeã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®Nodeã¯TxtNode/TxtParentNode/TxtTextNodeã®ã©ã‚Œã‹ã‚’ç¶™æ‰¿ã—ã¦ã„ã¾ã™ãŒã€Nodeã”ã¨ã«ç‰¹æœ‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã£ã¦ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
`TxtHeaderNode`ãªã‚‰`level`ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

```ts
export interface TxtHeaderNode extends TxtParentNode {
  type: "Header";
  depth: 1 | 2 | 3 | 4 | 5 | 6;
  children: PhrasingContent[];
}
```

è©³ã—ãã¯[`@textlint/ast-node-types`](https://github.com/textlint/textlint/tree/master/packages/%40textlint/ast-node-types)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [`@textlint/ast-node-types/src/NodeType.ts`](https://github.com/textlint/textlint/tree/master/packages/%40textlint/ast-node-types/src/NodeType.ts).

## Full Changelog

- [textlint v13.0.0 - textlint](https://github.com/textlint/textlint/releases/tag/v13.0.0)

## v13ã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã¾ã§ã®æµã‚Œ

æœ€åˆã«ESMã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®Issueã‚’ç«‹ã¦ã¦ã€å®Ÿéš›ã«ã©ã†ã‚„ã‚‹ã‹ã‚’PoC Pull Requestã‚’ä½œã£ã¦èª¿æŸ»ã—ã¦ã„ã¾ã—ãŸã€‚

- [Supports rules that are written as ECMAScript Modules Â· Issue #868 Â· textlint/textlint](https://github.com/textlint/textlint/issues/868)
- [feat(textlint): support ESM rule/filter-rule/preset/plugin by azu Â· Pull Request #898 Â· textlint/textlint](https://github.com/textlint/textlint/pull/898)

textlintã¯ESLintã¨ã¯ç•°ãªã‚Šã€æœ€åˆæœŸã‹ã‚‰éåŒæœŸå‡¦ç†ã§Lintã‚’ã™ã‚‹ã‚ˆã†ã«ãƒ‡ã‚¶ã‚¤ãƒ³ã—ã¦ã„ã¾ã—ãŸã€‚
ã—ã‹ã—ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ«ãƒ¼ãƒ«ã®ãƒ­ãƒ¼ãƒ‰ã¯åŒæœŸå‡¦ç†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚(å†…éƒ¨çš„ã«`require`ã‚’ä½¿ã†ãŸã‚ã€ã‚ãˆã¦éåŒæœŸå‡¦ç†ã«ã—ãªã„ã¨éåŒæœŸã«ã§ããªã‹ã£ãŸãŸã‚)

èª¿æŸ»ã—ã¦ã¿ã¦ã€ESMã®ãƒ­ãƒ¼ãƒ‰ã‚’äº’æ›æ€§ã‚’æŒã£ã¦ã‚„ã‚‹ã®ãŒã‹ãªã‚Šé›£ã—ã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
æœ€çµ‚çš„ã«ã ã‚ã ã£ãŸç†ç”±ã¯ã€[availableExtensions](https://github.com/textlint/textlint/discussions/968)ã¨ã„ã†ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Lintã§ãã‚‹ã‹ã¨ã„ã†æ‹¡å¼µå­ã‚’è¿”ã™APIãŒåŒæœŸçš„ã ã£ãŸãŸã‚ã§ã™ã€‚
ã“ã®æ‹¡å¼µå­ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¾ã§ã‚ã‹ã‚‰ãªã„ã®ã§ã™ãŒã€ESMã§æ›¸ã‹ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã«ã¯éåŒæœŸå‡¦ç†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãã®ãŸã‚ã€å®Œå…¨ã«äº’æ›æ€§ã‚’æŒã£ã¦ESMã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã¯ç„¡ç†ã§ã—ãŸã€‚

`textlint`ã®å†…éƒ¨ã§ãƒ­ãƒ¼ãƒ‰å‡¦ç†ãŒ[config.ts](https://github.com/textlint/textlint/blob/d9f9a24eadb280909cbb16dd350d685244abcd91/packages/textlint/src/config/config.ts)ã‚„TextLintEngineãªã©ã«åˆ†æ•£ã—ã¦ã„ã¦ã€ãã‚Œãã‚ŒãŒãƒ­ãƒ¼ãƒ‰å‡¦ç†ã‚’æ‰±ã£ã¦ã„ãŸã®ã‚‚å„ä»‹ã§ã—ãŸã€‚
ãã®ãŸã‚ã€ã“ã‚Œã‚‰ã®å‡¦ç†ã‚’æ•´ç†ã—ã¦æ–°ã—ã„APIã‚’ä½œã‚Šã€ãã‚Œã‚’ä½¿ã£ã¦ESMã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

TextLintEngineã§ã¯ã€æ¬¡ã®ã‚ˆã†ãªæµã‚Œã§Lintã‚’ã—ã¦ã„ã¾ã—ãŸã€‚
Engineã¨ã„ã†éƒ¨åˆ†ãŒã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã—ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã‚‚ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã—ã€Lintã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚æ¢ã™ã—ã€Kernelã«Lintã‚’ä¾é ¼ã™ã‚‹ã¨ã„ã†è¤‡é›‘ãªå‡¦ç†ã‚’ã—ã¦ã„ã¾ã—ãŸã€‚

![Engine](https://efcl.info/wp-content/uploads/2023/01/27-1674827405.png)

æ–°ã—ã„APIã§ã¯ã€`createLinter`ã‚„`loadTextlintrc`ã¨ã„ã£ãŸã‚ˆã†ã«ã€ãã‚Œãã‚Œã®å‡¦ç†ã‚’åˆ†é›¢ã—ã¦ã„ã¾ã™ã€‚
ãã®ãŸã‚ã€ãƒ­ãƒ¼ãƒ‰ã¯`loadTextlintrc`ã§è¡Œã„ã€`createLinter`ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¢ç´¢ã‚’ã—ã¦ã€Lintã¯Kernelã«ä¾é ¼ã™ã‚‹ã¨ã„ã†ã‚ˆã†ã«åˆ†é›¢ã—ã¦ã„ã¾ã™ã€‚

![Linter](https://efcl.info/wp-content/uploads/2023/01/27-1674827567.png)

Linterã‹ã‚‰ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å‡¦ç†ãŒç¶ºéº—ã«åˆ‡ã‚Šé›¢ã›ãŸã¨æ€ã„ã¾ã™ã€‚

ã“ã®è¾ºã®è¨­å®šã¯ã€æ¬¡ã®Issueã«ãƒ¡ãƒ¢ã‚’ã—ãªãŒã‚‰é€²ã‚ã¦ã„ã¾ã—ãŸã€‚

- [Supports rules that are written as ECMAScript Modules Â· Issue #868 Â· textlint/textlint](https://github.com/textlint/textlint/issues/868)

å®Ÿéš›ã«ã‚„ã‚‹ã¨ã‚¹ãƒƒã‚­ãƒªã—ã¾ã—ãŸãŒã€æ—¢å­˜ã®ã‚‚ã®ã‹ã‚‰ã©ã†ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã‹ãŒèª²é¡Œã¨ãªã‚Šã¾ã—ãŸã€‚
CLIã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€CLIãŒä½¿ã†APIã‚’åˆ‡ã‚Šæ›¿ãˆã‚Œã°ã„ã„ã ã‘ã§ã™ãŒã€`textlint`ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯APIè‡ªä½“ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

CLIã§ã¯ã€Old-CLIã¨New-CLIã®åŒã˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨åŒã˜ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½¿ã£ã¦ã€`TEXTLINT_USE_NEW_CLI=1`ã®ãƒ•ãƒ©ã‚°ã§åˆ‡ã‚Šæ›¿ãˆã‚‹çŠ¶æ…‹ã«ã—ã¦[v12.3.0](https://github.com/textlint/textlint/releases/tag/v12.3.0)ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å ´åˆã¯ã€ãã‚Œãã‚Œã®APIã¯å…±å­˜ã¯ã§ãã‚‹ã®ã§ã€å¤ã„APIã‚’éæ¨å¥¨ã¨ã—ã¦ã€æ–°ã—ã„APIã¸ã¨ç§»è¡Œã‚’ä¿ƒã™æ–¹é‡ã«ã—ã¾ã—ãŸã€‚
ãã®ãŸã‚ã€v13ã§ã¯ä¸¡æ–¹ã®APIã‚’ã‚µãƒãƒ¼ãƒˆã—ã€v14ã§å¤ã„APIã‚’å‰Šé™¤ã™ã‚‹ã¨ã„ã†æ–¹é‡ã«ãªã£ã¦ã„ã¾ã™ã€‚

- [Feedback for new APIs Â· Discussion #968 Â· textlint/textlint](https://github.com/textlint/textlint/discussions/968)

æ–°ã—ã„APIã¯ã€åŠåˆ†ã¯ã™ã§ã«ã‚ã£ãŸ[@textlint/kernel](https://github.com/textlint/textlint/tree/master/packages/%40textlint/kernel)ã¨ã„ã†ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã®è–„ã„ãƒ©ãƒƒãƒ‘ãƒ¼ã§ã™ã€‚
ã“ã®è¾ºã®å‰ã«ã€ã‚³ã‚¢ã‚’[@textlint/kernel](https://github.com/textlint/textlint/tree/master/packages/%40textlint/kernel)ã«åˆ†é›¢ã—ã¦ã„ãªã‹ã£ãŸã‚‰ã€ã‚ã¾ã‚Šã«ã‚‚å¤‰æ›´é‡ãŒå¤šãã¦ã€ãŠãã‚‰ãã§ããªã‹ã£ãŸå¤‰æ›´ãªæ°—ãŒã—ã¾ã™ã€‚

- [textlintã®ã‚³ã‚¢ã‚’TypeScriptã§æ›¸ãç›´ã—ãŸã€textlintã®ä»Šå¾Œã«ã¤ã„ã¦ | Web Scratch](https://efcl.info/2017/11/06/textlint-core-refactoring/)

ã¡ã‚ƒã‚“ã¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ†ã‘ã¦ãŠãã®ã¯å¤§äº‹ã ãªãƒ¼ã¨æ€ã„ã¾ã—ãŸã€‚

- [textlint - Linterã®ä½œã‚Šæ–¹](https://azu.github.io/slide/2022/lint-night/textlint.html)

ã‚ã¨ã€ã‚³ã‚¢ã‚’åˆ†é›¢ã—ãŸã¨ãã«textlintã§ã¯ã€CLIã¨ã„ã†é«˜ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å¯¾ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’çµæ§‹å¢—ã‚„ã—ã¦ã„ã¾ã—ãŸã€‚
ã“ã‚Œã¯ã€é–¢æ•°ã«å¯¾ã™ã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã ã¨ã€ã“ã†ã„ã£ãŸå¤‰æ›´ã§ãƒ†ã‚¹ãƒˆã‚’æ¨ã¦ãªã„ã¨ã„ã‘ãªã„å ´åˆãŒå¤šã„ã§ã™ã€‚
ä¸€æ–¹ã§ã€CLIã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ãã‚“ãªã«å¤‰ã‚ã‚‰ãªã„ãŸã‚ã€ãƒ†ã‚¹ãƒˆãŒå†åˆ©ç”¨ã—ã‚„ã™ãã¦ã€å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¿‘ã„ãƒ†ã‚¹ãƒˆã«ãªã‚Šã¾ã™ã€‚

- [textlint/cli-test.ts at master Â· textlint/textlint Â· GitHub](https://github.com/textlint/textlint/blob/master/packages/textlint/test/cli/cli-test.ts)

åŒã˜ã‚ˆã†ãªç†ç”±ã§ã€å®Ÿéš›ã®textlintã‚’ä½¿ã£ã¦ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã‚‚CIã§å›ã—ã¦ã„ã¾ã™ã€‚

- [textlint/test/integration-test at master Â· textlint/textlint Â· GitHub](https://github.com/textlint/textlint/tree/master/test/integration-test)

ã“ã‚Œã‚‰ã®ãƒ†ã‚¹ãƒˆãŒã‚ã£ãŸã®ã§ã€çµæ§‹å®‰å¿ƒã—ã¦ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§ãã¾ã—ãŸã€‚

## Thanks to Support!

Contributionã‚„GitHub Sponsorsã§ã®ã‚µãƒãƒ¼ãƒˆã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼

ã‚‚ã—ã€GitHub Sponsorsã§ã®ã‚µãƒãƒ¼ãƒˆã‚’æ¤œè¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€[@azu on GitHub Sponsors](https://github.com/sponsors/azu)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼

<iframe src="https://github.com/sponsors/azu/card" title="Sponsor azu" height="225" width="600" style="border: 0;"></iframe>
