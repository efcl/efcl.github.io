---
title: "å°ã•ãªEventEmitterãƒ©ã‚¤ãƒ–ãƒ©ãƒª - eventmitã‚’æ›¸ã„ãŸ"
author: azu
layout: post
date : 2020-06-13T11:02
category: JavaScript
tags:
    - JavaScript
    - library

---

EventEmitterã®ã‚ˆã†ã«Pub/Subã‚’è¡Œã†`eventmit`ã¨ã„ã†å°ã•ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ›¸ãã¾ã—ãŸã€‚

- [azu/eventmit: Simple EventEmitter. A single event object per an event.](https://github.com/azu/eventmit)

[eventmit](https://github.com/azu/eventmit)ã¯ã€TypeScriptã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚
ã¾ãŸã€Node.jsã®[EventEmitter](https://nodejs.org/api/events.html)ãªã©ã¨ã¯é•ã£ã¦ã€ã‚¤ãƒ™ãƒ³ãƒˆä¸€ã¤ã«å¯¾ã—ã¦`eventmit`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸€ã¤ä½œæˆã—ã¦ä½¿ã„ã¾ã™ã€‚

```ts
import { eventmit } from "eventmit";
const event = eventmit<{ key: string }>();
// Register handler
event.on((value) => {
    console.log(1, value);
});
event.on((value) => {
    console.log(2, value);
});
// Invoke handler
event.emit({
    key: "value"
});
// Unregister handler
event.offAll();
```

ã‚µã‚¤ã‚ºã‚‚ã ã„ãŸã„200Byteãã‚‰ã„ãªã®ã§ã€å¯¾ã—ã¦æ°—ã«ãªã‚‹ã‚µã‚¤ã‚ºã§ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚

[![bundle size 200Byte](https://efcl.info/wp-content/uploads/2020/06/13-1592013887.png)](https://bundlephobia.com/result?p=eventmit@1.0.2)

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

npmãªã©ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

    npm install eventmit

ES Modulesã¨ã‹ã‚‚å…¬é–‹ã—ã¦ã‚ã‚‹ã®ã§[Deno](https://deno.land/)ã¨ã‹ã‹ã‚‰ã§ã‚‚ä½¿ãˆã‚‹ã¨æ€ã„ã¾ã™ã€‚(READMEã«ä½¿ã„æ–¹ã‚’è¿½åŠ ã™ã‚‹PRå¾…ã£ã¦ã„ã¾ã™)

ã¾ãŸã€`eventmit`ã¯ES 2015ã®`Set`ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€ES2015ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹å®Ÿè¡Œç’°å¢ƒãŒå¿…è¦ã§ã™ã€‚

## èƒŒæ™¯

ä»Šã¾ã§Node.jsã®[events](https://nodejs.org/api/events.html)ã‚’ä½¿ã†ã“ã¨ãŒå¤šã‹ã£ãŸã§ã™ã€‚

ã—ã‹ã—ã€æœ€è¿‘ã¯webpack 5ã§Node.jsã®ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®polyfillã¯ã•ã‚Œãªããªã‚‹ç‚¹ã‚„React Nativeã®ãƒ“ãƒ«ãƒ‰ã§ã‚‚åŒæ§˜ã«è¨­å®šã—ãªã„ã¨`events`ãªã©ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚

- [changelog-v5/README.md at master Â· webpack/changelog-v5](https://github.com/webpack/changelog-v5/blob/master/README.md#automatic-nodejs-polyfills-removed)
- [parshap/node-libs-react-native: Node core modules for React Native](https://github.com/parshap/node-libs-react-native)

ã¾ãŸã€webpackãªã©ã¯`events`ã®polyfillã¨ã—ã¦[Gozala/events](https://github.com/Gozala/events)ã‚’åˆ©ç”¨ã™ã‚‹ã®ã§ã™ãŒã€Node.jså´ã®å®Ÿè£…ã¨ã®ã‚ºãƒ¬ãŒã—ã°ã—ã°èµ·ãã¦ã„ã‚‹ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚

- [JSerãƒ¬ãƒãƒ¼ãƒˆ #2: Node.jsã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨Bundler(webpackãªã©)ã«ã‚ˆã‚‹polyfillã®ã‚®ãƒ£ãƒƒãƒ— - JSer.info](https://jser.info/2018/12/25/node-browser-libs-gap/)

ãã®ãŸã‚Node.jsã®`events`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯Universalãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ãªããªã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ä¸€æ–¹ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®EventEmitterçš„ãªã‚‚ã®ã§ã‚ã‚‹[EventTarget](https://developer.mozilla.org/ja/docs/Web/API/EventTarget)ã‚’Node.jsã¸å®Ÿè£…ã™ã‚‹å‹•ãã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯`AbortController`ãŒ`EventTarget`ã«ä¾å­˜ã™ã‚‹ãŸã‚ã§ã™ã€‚

- [events: initial implementation of experimental EventTarget by jasnell Â· Pull Request #33556 Â· nodejs/node](https://github.com/nodejs/node/pull/33556)
- [Events test and EventTarget in Node.js Â· Issue #23858 Â· web-platform-tests/wpt](https://github.com/web-platform-tests/wpt/issues/23858)

ãã®ãŸã‚ã€`EventTarget`ãŒãƒ–ãƒ©ã‚¦ã‚¶ã¨Node.jsã©ã¡ã‚‰ã§ã‚‚å‹•ãAPIã¨ã—ã¦å°†æ¥ä½¿ãˆã‚‹å¯èƒ½æ€§ã¯ã‚ã‚Šã¾ã™ã€‚

ã“ã®è¾ºã‚’è€ƒãˆã‚‹ã®ãŒé¢å€’ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§ã€[eventmit](https://github.com/azu/eventmit)ã¨ã„ã†å°ã•ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã‚‹ã“ã¨ã—ã¾ã—ãŸã€‚

`eventemit`ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã€å…¨éƒ¨è²¼ã‚Šä»˜ã‘ã‚‹ã¨æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚

```js
var n = function () {var n = new Set();return { on: function (t) {n.add(t);}, off: function (t) {n.delete(t);}, offAll: function () {n.clear();}, emit: function (t) {n.forEach(function (n) {return n(t);});} };};export { n as eventmit };
```

React Hooksã‹ã‚‰ä½¿ã†ã‚‚ã„ã¤ã®é–“ã«ã‹ä½œã‚‰ã‚Œã¦ã„ã¾ã—ãŸã€‚

- [steelydylan/use-eventmit](https://github.com/steelydylan/use-eventmit)

è¤‡æ•°ã®ã‚¤ãƒ™ãƒ³ãƒˆtypeã‚’å–ã‚ŠãŸã„å ´åˆã¯`mitt`ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãã‚Œã‚’æä¾›ã—ã¦ã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚’ä½¿ã†ã¨ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

- [developit/mitt: ğŸ¥Š Tiny 200 byte functional event emitter / pubsub.](https://github.com/developit/mitt)

`mitt`ã‚’ä½¿ã‚ãªã‹ã£ãŸã®ã¯ã€å‹å®šç¾©ãŒã‚†ã‚‹ã„æ„Ÿã˜ã ã£ãŸãŸã‚ã§ã™ã€‚
ä¸€å¿œ[Conditional Typesã‚’ä½¿ãˆã°å¼·ã‚ã®å‹ã‚‚æ›¸ã‘ã¾ã™](https://medium.com/@bterlson/strongly-typed-event-emitters-2c2345801de8)ãŒã€ä¸€ã¤ã®EventEmitterã§è¤‡æ•°ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã„ãŸã„ç†ç”±ã‚‚ãªã‹ã£ãŸã®ã§ã€ã‚‚ã£ã¨å˜ç´”ã§å‹å®‰å…¨ãª[eventmit](https://github.com/azu/eventmit)ã‚’ä½œã£ãŸã¨ã„ã†æ„Ÿã˜ã§ã™ã€‚


- [azu/eventmit: Simple EventEmitter. A single event object per an event.](https://github.com/azu/eventmit)
