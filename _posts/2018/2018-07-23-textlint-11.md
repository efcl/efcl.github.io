---
title: "textlint 11ãƒªãƒªãƒ¼ã‚¹"
author: azu
layout: post
date : 2018-07-23T09:32
category: textlint
tags:
    - JavaScript
    - textlint

---

[textlint](https://textlint.github.io/) 11.0.0ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚

ç´°ã‹ã„å¤‰æ›´ç‚¹ã¯æ¬¡ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

- <https://textlint.github.io/blog/2018/07/22/textlint-11.html>

## â­ï¸ Features

### [@textlint/textlint-plugin-text](https://github.com/textlint/textlint/tree/master/packages/%40textlint/textlint-plugin-text)ã¨[@textlint/textlint-plugin-markdown](https://github.com/textlint/textlint/tree/102d5683ea7172ead702acf00e9fc111a53637d3/packages/%40textlint/textlint-plugin-markdown)ãŒ `extensions` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆ

[@textlint/textlint-plugin-text](https://github.com/textlint/textlint/tree/master/packages/%40textlint/textlint-plugin-text)ã¨[@textlint/textlint-plugin-markdown](https://github.com/textlint/textlint/tree/102d5683ea7172ead702acf00e9fc111a53637d3/packages/%40textlint/textlint-plugin-markdown)ã¯ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã£ã¦ã€`.md`ãªã©ã®æ‹¡å¼µå­ãŒMarkdownã¨ã—ã¦èªè­˜ã•ã‚Œtextlintã§Lintã§ãã¦ã„ã¾ã™ã€‚

textlint 11ã§ã¯ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒ`extensions`ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚
ãŸã¨ãˆã°ã€ `.hown` ã¨ã„ã†æ‹¡å¼µå­ã‚’Markdownã¨ã—ã¦æ‰±ã„ãŸã„å ´åˆ `.textlintrc` ã«æ¬¡ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚

```json
{
    "plugins": {
        "@textlint/markdown": {
            "extensions": [".hown"]
        }
    }
}
```

è©³ã—ãã¯ [custom extension example](https://github.com/textlint/textlint/tree/master/examples/plugin-extensions-option) ã¨ã„ã†ã‚µãƒ³ãƒ—ãƒ«ã‚’è¦‹ã‚‹ã¨ã‚ã‹ã‚Šã¾ã™ã€‚


è‡ªåˆ†ã§ä½œã£ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§åŒã˜ä»•çµ„ã¿ã® `extensions` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å ´åˆã¯ã€[Plugin Â· textlint](https://textlint.github.io/docs/plugin.html)ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ãã ã•ã„ã€‚

## ğŸ”¥BREAKING CHANGE

### Drop Node.js 4.x support [#443](https://github.com/textlint/textlint/issues/443) 

textlint 11ã‹ã‚‰ã¯Node.js 4.xã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
ï¼ˆã“ã“ã§ã®ã‚µãƒãƒ¼ãƒˆã¯ãƒ†ã‚¹ãƒˆå¯¾è±¡ã§ã¯ãªã„ã¨ã„ã†æ„å‘³ãªã®ã§ã¾ã å‹•ãå¯èƒ½æ€§ã¯ã‚ã‚Šã¾ã™ï¼‰

ã¾ãŸã€Node.js 4.xè‡ªä½“ãŒNode.jså…¬å¼ã«ã‚µãƒãƒ¼ãƒˆãŒçµ‚äº†ã—ã¦ã„ã¾ã™ï¼ˆEOLï¼‰ã€‚

- [nodejs/Release: Node.js Foundation Release Working Group](https://github.com/nodejs/Release)

ãã®ãŸã‚ã€Node.js 4.xã‚’ä½¿ã£ã¦ã„ã‚‹äººã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çš„ãªå•é¡Œã‚‚ã‚ã‚‹ãŸã‚Node.jsã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ã—ã¦ãã ã•ã„ã€‚

- [Node.js official site](https://nodejs.org/)

### [Developer] Freeze Rule's Context [#508](https://github.com/textlint/textlint/issues/508) 

é–‹ç™ºè€…å‘ã‘ã§ã™ãŒã€ãƒ«ãƒ¼ãƒ«ã«ã‚ãŸã•ã‚Œã‚‹ `context` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ `Object.freeze`ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ä½™è¨ˆãªå¤‰æ›´ãŒã§ããªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚
æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¯textlint 11ã§ã¯ä¾‹å¤–ã‚’æŠ•ã’ã¾ã™ã€‚

```js
export default function(context) {
    // Error: `context` object can not be modified
    context.modifiedContext = true;
    const { Syntax } = context;
    return {
        [Syntax.Str](node) {
        }
    };
}
```

åŒã˜ã‚ˆã†ã«ASTã®å¤‰æ›´ã‚‚ä¾‹å¤–ã‚’æŠ•ã’ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ã„ã†IssueãŒã‚ã‚Šã¾ã™ã€‚
èˆˆå‘³ãŒã‚ã‚‹äººã¯è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚

- [textlint-tester: validate AST modification Â· Issue #489 Â· textlint/textlint](https://github.com/textlint/textlint/issues/489)

### [Developer] ãƒ«ãƒ¼ãƒ«ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®`options`ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å¤‰æ›´ [#535](https://github.com/textlint/textlint/issues/535) [#540](https://github.com/textlint/textlint/issues/540)

textlint 11ã§ã¯ãƒ«ãƒ¼ãƒ«ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ä½•ã‚‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ãªã„ã®ã¨ãã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’`true`ã‹ã‚‰`{}`ï¼ˆç©ºã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚

ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãª`very-nice-rule`ã‚’`true`ã§æœ‰åŠ¹åŒ–ã—ã¦ã„ãŸå ´åˆã«textlint 10ã¨11ã§ã¯`options`ã«æ¸¡ã•ã‚Œã‚‹å€¤ãŒç•°ãªã‚Šã¾ã™ã€‚
 
```json
{
  "rules": {
    "very-nice-rule": true
  }
}
```

**Before**

`very-nice-rule.js` rule get `true` as `options`.
 
```js
export default function(context, options) {
    console.log(options); // true
}
```

**After**:
 
`very-nice-rule.js` rule get `{}` (emptry object) as `options`.
 
```js
export default function(context, options) {
    console.log(options); // {}
}
```

textlint 10ã¾ã§ã®å®Ÿè£…ã¯ä½¿ã„ã¿ã¡ãŒãªãæ‰±ã„ã«ãã„ã ã‘ã ã£ãŸã®ã§11ã§ `{}` ç©ºã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ã‚‚ã—ã‹ã—ãŸã‚‰ã“ã®å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚textlint 11ã§ã‚¨ãƒ©ãƒ¼ãŒã§ã‚‹ãƒ«ãƒ¼ãƒ«ã‚’è¦‹ã¤ã‘ãŸã‚‰ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚

## âš  Deprecation 

### [Developer] Deprecate `static availableExtensions()` in plugin Processor


textlint 10ã¾ã§ã¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹æ‹¡å¼µå­ã‚’`static availableExtensions()`ã‚’å®Ÿè£…ã—è¿”ã™ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚
textlint 11ã‹ã‚‰ã¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹æ‹¡å¼µå­ã‚’`availableExtensions()`ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§è¿”ã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

- [#534](https://github.com/textlint/textlint/issues/534)

`static`ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ãªãã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã§å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ã§ã€`availableExtensions()`ã®ä¸­ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å€¤ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚
ã“ã‚Œã¯`extensions`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«å¿…è¦ãªå¤‰æ›´ã§ã—ãŸã€‚

ãã®ãŸã‚ã€æ—¢å­˜ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚
(`static`ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚äº’æ›æ€§ã®ãŸã‚ã«ç¶­æŒã—ã¦ã„ã¾ã™ã€‚ï¼‰

```diff
-    static availableExtensions() {
+    availableExtensions() {
        return [".txt", ".text"];
    }
```

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§`extensions`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã«ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚

```js
// TextProcessor.js
import { parse } from "txt-to-ast";
export default class TextProcessor {
    constructor(options = {}) {
        this.options = options;
        // support "extension" option
        this.extensions = this.config.extensions ? this.config.extensions : [];
    }
    // available ".ext" list
    // user can add own custom extension as "extensions" option
    availableExtensions() {
        return [".txt", ".text"].concat(this.extensions);
    }
    // define pre/post process
    // in other words, parse and generate process
    processor(ext) {
        return {
            preProcess(text, filePath) {
                // parsed result is a AST object
                // AST is consist of TxtNode
                // https://github.com/textlint/textlint/blob/master/docs/txtnode.md
                return parse(text);
            },
            postProcess(messages, filePath) {
                return {
                    messages,
                    filePath: filePath ? filePath : "<text>"
                };
            }
        };
    }
}
```

è©³ã—ãã¯æ¬¡ã®ãƒšãƒ¼ã‚¸ã‚’ã¿ã¦ãã ã•ã„ã€‚

- Example: [feat: markdown/text plugin support "extensions" options by azu Â· Pull Request #537 Â· textlint/textlint](https://github.com/textlint/textlint/pull/537)
- Document: [availableExtensions(): string\[\]](https://github.com/textlint/textlint/blob/master/docs/plugin.md#availableextensions-string).


## ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ

- [textlint 11 released Â· textlint](https://textlint.github.io/blog/2018/07/22/textlint-11.html)

---

## ãã®ä»–

textlintæœ¬ä½“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æŠ€è¡“æ–‡æ›¸å‘ã‘ã®textlintãƒ«ãƒ¼ãƒ«ãƒ—ãƒªã‚»ãƒƒãƒˆã‚‚æœ€è¿‘ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

- [textlint-ja/textlint-rule-preset-ja-technical-writing: æŠ€è¡“æ–‡æ›¸å‘ã‘ã®textlintãƒ«ãƒ¼ãƒ«ãƒ—ãƒªã‚»ãƒƒãƒˆ](https://github.com/textlint-ja/textlint-rule-preset-ja-technical-writing)
- [Release 3.0.0 Â· textlint-ja/textlint-rule-preset-ja-technical-writing](https://github.com/textlint-ja/textlint-rule-preset-ja-technical-writing/releases/tag/3.0.0)

macOS + Chromeã§ä¸€æ™‚æœŸãƒã‚°ã£ã¦å…¥ã£ã¦ã„ãŸåˆ¶å¾¡æ–‡å­—ã‚’æ¤œå‡ºã—ã¦ä¿®æ­£ã§ãã‚‹[textlint-rule-no-invalid-control-character ](https://github.com/textlint-rule/textlint-rule-no-invalid-control-character)ã‚„[textlint-rule-sentence-length](https://github.com/textlint-rule/textlint-rule-sentence-length)ãŒå¤§å¹…ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

èˆˆå‘³ãŒã‚ã‚‹äººã¯è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚

æœ€è¿‘[Wikipedia:è¡¨è¨˜ã‚¬ã‚¤ãƒ‰ - Wikipedia](https://ja.wikipedia.org/wiki/Wikipedia:%E8%A1%A8%E8%A8%98%E3%82%AC%E3%82%A4%E3%83%89)ã‚’ã¿ã¦ã„ã¦ã€çµæ§‹ã‚ˆãã¾ã¨ã¾ã£ã¦ã„ãŸã®ã§ã“ã®ã‚¬ã‚¤ãƒ‰ã‚‚ãƒ«ãƒ¼ãƒ«åŒ–ã§ãã‚‹ã¨é¢ç™½ãã†ã§ã™ã€‚
