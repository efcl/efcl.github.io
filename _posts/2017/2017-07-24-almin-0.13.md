---
title: "Almin 0.13ãƒªãƒªãƒ¼ã‚¹ - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³"
author: azu
layout: post
date : 2017-07-24T10:35
category: JavaScript
tags:
    - Almin
    - JavaScript
    - Flux
    - CQRS

---

[Almin](https://github.com/almin/almin "Almin") 0.13.xã®Stableç‰ˆã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚
ä»Šå¾Œã«å‘ã‘ã¦ä¸‹åœ°ã¨ãªã‚‹åŸºç›¤éƒ¨åˆ†ã‚’ã‹ãªã‚Šæ›¸ãæ›ãˆãŸã®ã¨ã€Strict modeã‚„è©¦é¨“çš„ã«Transactionã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

[![Diff 12.x...13](https://efcl.info/wp-content/uploads/2017/07/24-1500860504.png)](https://github.com/almin/almin/compare/almin%400.12.0...almin%400.13.10)

- [Release Almin 0.13.10 Â· almin/almin](https://github.com/almin/almin/releases/tag/almin%400.13.10 "Release Almin 0.13.10 Â· almin/almin")

## ã¾ã¨ã‚

0.12xã‹ã‚‰ã®[0.13.10](https://github.com/almin/almin/releases/tag/almin%400.13.10 "Release Almin 0.13.10 Â· almin/almin")ã®å¤‰æ›´ã‚’ã¾ã¨ã‚ã‚‹ã¨æ¬¡ã®é€šã‚Šã§ã™ã€‚

- ğŸ”¥ Breaking Changes
   - IE9/IE10ã®ã‚µãƒãƒ¼ãƒˆçµ‚äº†
   	  - CIã‹ã‚‰è½ã¨ã—ãŸã ã‘ãªã®ã§ã¾ã å‹•ãã‹ã‚‚ã—ã‚Œãªã„ã§ã™ãŒ
   - ä¸€éƒ¨Deprecatedã¯ã‚ã‚Šã¾ã™ãŒåŸºæœ¬çš„ã«ã‚³ãƒ¼ãƒ‰ã¯å¤‰æ›´ã—ãªãã¦ã‚‚å‹•ãã¯ãšã§ã™
- âš ï¸ Deprecated
   - ãƒªãƒãƒ¼ãƒ  `context.onWillExecuteEachUseCase` -> `context.events.onWillExecuteEachUseCase`
   - [almin/migration-tools](https://github.com/almin/migration-tools "almin/migration-tools")ã‚’ä½¿ã†ã“ã¨ã§è‡ªå‹•çš„ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ãã¾ã™ã€‚
- ğŸ†• Features
   - Strict mode
   - Transaction(strict modeã§ã®ã¿æœ‰åŠ¹)
   - `executor` - `execute`ã®Type Safeç‰ˆã§ã™
     - æ„è¦‹å‹Ÿé›†ä¸­: [TypeScript: improve UseCase#execute typing Â· Issue #107 Â· almin/almin](https://github.com/almin/almin/issues/107 "TypeScript: improve UseCase#execute typing Â· Issue #107 Â· almin/almin")
- :house: Internal
   - Unit of Work(ä½œæ¥­å˜ä½)ãŒå†…éƒ¨çš„ãªå®Ÿè£…ã¨ã—ã¦è¿½åŠ ã•ã‚Œã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ãªã©ãŒã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ãã¡ã‚“ã¨ç®¡ç†ã•ã‚Œã‚‹ã‚ˆã†ã«(Transactionãªã©ã‚‚ã“ã‚Œã‚’åˆ©ç”¨)

è©³ã—ãã¯[Release Almin 0.13.10 Â· almin/almin](https://github.com/almin/almin/releases/tag/almin%400.13.10 "Release Almin 0.13.10 Â· almin/almin")ã‚’ã¿ã¦ãã ã•ã„ã€‚

----


## Breaking Change ğŸ”¥ 

Almin 0.13ã¯å¹¾ã¤ã‹ç ´å£Šçš„ãªå¤‰æ›´ãŒã‚ã‚Šã¾ã™ãŒã€æ®†ã©ã®å ´åˆã‚³ãƒ¼ãƒ‰ã¯å¤‰æ›´ã—ãªãã¦ã‚‚å‹•ãã¨æ€ã„ã¾ã™ã€‚

### Drop IE9 and IE10

IE 9/10ã®ã‚µãƒãƒ¼ãƒˆã¯çµ‚äº†ã—ã¾ã—ãŸã€‚

- [Internet Explorer End of Support](https://www.microsoft.com/en-us/windowsforbusiness/end-of-ie-support "Internet Explorer End of Support")

### Store#onDispatch receive only dispatched the Payload by UseCase#dispatch #224 #254 #255  

`Store#onDispatch`ã¯ä»Šã¾ã§`UseCase#dispatch`ä»¥å¤–ã®å†…éƒ¨çš„ãªpayloadã‚’å—ã‘å–ã£ã¦ã„ã¾ã—ãŸã€‚
ä»Šå›ã‹ã‚‰ã¯`Store#onDispatch`ã¯`UseCase#dispatch`ã®ã¿ã€ã¤ã¾ã‚Šãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ãŒ`dispatch`ã—ãŸpayloadã®ã¿ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚

ä»–ã®Alminã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚Šå¯¾å ´åˆã¯`context.events`(`LifeCycleEventHub`)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [LifeCycle of UseCase Â· Almin.js](https://almin.js.org/docs/tips/usecase-lifecycle.html "LifeCycle of UseCase Â· Almin.js")

**Recommened**: åŸºæœ¬çš„ã«ã¯Storeã®æ›´æ–°ã¯`Store#receivePayload`ã§è¡Œã†ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚(Strict modeã¯ã“ã‚Œã‚’ãƒã‚§ãƒƒã‚¯ã§ãã¾ã™)

`Store#receivePayload`ã§ã®Storeæ›´æ–°ã®ãƒ‘ã‚¿ãƒ¼ãƒ³

```js
class YourStore extends Store {
   constructor(){
      super();
      // Initialize state
      this.state = {
         foo : "bar"
      };
   }

   // Update code here
   receivePayload(payload){
     this.setState(this.state.reduce(payload));
   }

   getState(){
     return this.state;
   }
}
```

### Automatically catch  throwing Error from `UseCase#execute()` #193 #194 

0.12ã¾ã§ã¯`UseCase#execute`ã§åŒæœŸçš„ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã¨çªãæŠœã‘ã¦ã€`window.onerror`ã¾ã§åˆ°é”ã—ã¦ã„ã¾ã—ãŸã€‚

0.13ã‹ã‚‰ã¯ã€åŒæœŸçš„ãªã‚¨ãƒ©ãƒ¼ã§ã‚ã£ã¦ã‚‚`catch`ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```js
class ThrowUseCase extends UseCase {
  execute() {
     throw new Error("error");
  }
}

context.useCase(new ThrowUseCase).catch(error => {
    console.log("It can catch")
});
```

### `new Store()` throw Error

`Store`ã¯abstract classãªã®ã§ç¶™æ‰¿ã—ã¦ãã ã•ã„ã€‚
`new Store()`ã¯å˜ç´”ã«`getState`æ™‚ã«ä¾‹å¤–ã‚’æŠ•ã’ã¾ã™ã€‚

## Notable Changes 

### Renaming: `context.on*` to `context.events.on*` #239 

`context.on*`ãªã©ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¤œçŸ¥ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’`context.events.on*`ã«ç§»å‹•ã—ã¾ã—ãŸã€‚

ãŸã ã—ã€`Context#onChange`ã¯ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã¨ã„ã†æ‰±ã„ã§ã¯ãªãã€UIæ›´æ–°ã®ãŸã‚ã®ãƒãƒ³ãƒ‰ãƒ©ã‚’ç™»éŒ²ã™ã‚‹APIãªã®ã§ãã®ã¾ã¾`Context`ã«æ®‹ã£ã¦ã„ã¾ã™ã€‚
ä»–ã®APIã¯éæ¨å¥¨ã¨ãªã£ã¦ã„ã¾ã™ã€‚

ä»Šã¯ã¾ã `@deprecated`ã‚¿ã‚°ãŒã¤ã„ãŸã ã‘ã§ã™ãŒã€ã‚‚ã†ã¡ã‚‡ã£ã¨ã—ãŸã‚‰ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚‚è­¦å‘ŠãŒå‡ºã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãã—ã¦æ¬¡ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§å‰Šé™¤ã—ã¾ã™ã€‚

- [almin: Deprecated warning should be print Â· Issue #258 Â· almin/almin](https://github.com/almin/almin/issues/258 "almin: Deprecated warning should be print Â· Issue #258 Â· almin/almin")

ã“ã‚Œã‚’ç§»è¡Œã™ã‚‹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã‚‚ç”¨æ„ã—ã¦ã‚ã‚‹ã®ã§ã”åˆ©ç”¨ãã ã•ã„ã€‚

- [almin/migration-tools: Migration scripts for Almin.](https://github.com/almin/migration-tools#migrate-012-to-013 "almin/migration-tools: Migration scripts for Almin.")

### Migration

[almin/migration-tools](https://github.com/almin/migration-tools "almin/migration-tools")ã¯ã¤ãã®ã‚ˆã†ã«npmã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚
å¾Œã¯ç§»è¡Œã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦å¯¾è©±ã«å¾“ã£ã¦é¸æŠã™ã‚Œã°å®Œäº†ã§ã™ã€‚

**Notes** å…ˆã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã«ã‚³ãƒŸãƒƒãƒˆã—ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ã‹ã‚‰å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```sh
npm install -g @almin/migration-tools
almin-migration-tools [<file|glob> ...]
```

**Before**:

```js
context.onWillExecuteEachUseCase((payload, meta) => {});
context.onDispatch((payload, meta) => {});
context.onDidExecuteEachUseCase((payload, meta) => {});
context.onCompleteEachUseCase((payload, meta) => {});
context.onErrorDispatch((payload, meta) => {});
```

**After**:

```js
context.events.onWillExecuteEachUseCase((payload, meta) => {});
context.events.onDispatch((payload, meta) => {});
context.events.onDidExecuteEachUseCase((payload, meta) => {});
context.events.onCompleteEachUseCase((payload, meta) => {});
context.events.onErrorDispatch((payload, meta) => {});
```

### UndocumentãªAPIã§ã‚ã‚‹`UseCaseExecutor#on*`ãŒå‰Šé™¤ #243 

Remove

```
UseCaseExecutor#onWillExecuteEachUseCase
UseCaseExecutor#onDidExecuteEachUseCase
UseCaseExecutor#onCompleteExecuteEachUseCase
```

## Feature ğŸ†• 

## Strict mode

è©³ã—ãã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦ãã ã•ã„ã€‚

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: <https://almin.js.org/docs/tips/strict-mode.html>

Strict modeã¯`Store#receivePayload`ä»¥å¤–ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€`Store`ã‚’æ›´æ–°ã‚·ã¦ã„ã‚‹ã¨è­¦å‘Šã‚’å‡ºã™ã‚ˆã†ã«ã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚

```js
// enable strict mode
const context = new Context({ 
   dispatcher, 
   store, 
   options: {
     strict: true
   }
});
```

é–¢é€£:

- [Strict Mode Â· Vuex](https://vuex.vuejs.org/en/strict.html)
- [mobx/api.md at gh-pages Â· mobxjs/mobx](https://github.com/mobxjs/mobx/blob/gh-pages/docs/refguide/api.md#usestrict)


### `Context#transaction` #226

- **Stability**: Experimental
- **ã“ã®æ©Ÿèƒ½ã¯strict modeã§ã¯ãªã„ã¨è­¦å‘ŠãŒã§ã¾ã™**

`Context#transaction`ã¯UseCaseã‚’ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³çš„ã«å®Ÿè¡Œã™ã‚‹APIã§ã™ã€‚
`Context#useCase`ã¯ä¸€ã¤ã®UseCaseã‚’ä¸€å€‹ãšã¤å®Ÿè¡Œã—ã¦ã€ãã®UseCaseã®å®Ÿè¡Œçµ‚äº†æ¯ã«Viewã®æ›´æ–°ãŒè¡Œã‚ã‚Œã¾ã™ã€‚(å…·ä½“çš„ã«ã¯StoreãŒä¸€ã¤ã§ã‚‚å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ãªã‚‰`Context#onChange`ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™)

ä¸€æ–¹ã€`Context#transaction`ã¯`TransactionContext`ã¨ã„ã†ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½œã‚Šã€`transactionContext.useCase`ã§UseCaseã‚’å®Ÿè¡Œã—ã¦ã‚‚ã™ãã«ã¯Viewã®æ›´æ–°ã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚

å¹¾ã¤ã‹ã®UseCaseã‚’`transactionContext.useCase`ã§å®Ÿè¡Œã—ãŸå¾Œã«ã€ç¢ºå®šã—ãŸã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€`transactionContext.commit()`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã‚Œã¾ã§ã«å®Ÿè¡Œã—ã¦ã„ãŸUseCaseã‹ã‚‰ã®`dispatch`ã‚„ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãªã©ã¯ã¾ã¨ã‚ã¦Storeã«ä¼ã‚ã‚Šã¾ã™ã€‚

`Context#transaction`ã®ä¸­ã§UseCaseã‚’ä½•åº¦å®Ÿè¡Œã—ã¦ã‚‚çµæœã¨ã—ã¦èµ·ãã‚‹Viewã®æ›´æ–°ã¯`commit()`ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ä¸€å›ã ã‘ã«ãªã‚Šã¾ã™ã€‚

[![UseCase vs. Transaction](https://user-images.githubusercontent.com/19714/28418288-245d9786-6d96-11e7-87af-611682a18dec.png)
](http://www.nomnoml.com/#view/%23padding%3A%2010%0A%0A%5BContext%23useCase%7C%0A%20%20%20%5B%3Cusecase%3E%20UseCase%20A%5D%0A%5D%0A%5BContext%23transaction%7C%0A%20%20%5BUnit%20of%20Work%7C%0A%20%20%20%5B%3Cusecase%3E%20UseCase%20A%5D%0A%20%20%20%5B%3Cusecase%3E%20UseCase%20B%5D%0A%20%20%20%5B%3Cusecase%3E%20UseCase%20C%5D%0A%20%20%5D%0A%5D "nomnoml")

**ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰**:

```js
const context = new Context({
    dispatcher: new Dispatcher(),
    store: storeGroup,
    options: {
        strict: true
    }
});
// then - called change handler a one-time
let onChangeCount = 0;
context.onChange(stores => {
    onChangeCount++;
});
// when
context
    .transaction("transaction name", transactionContext => {
        return transactionContext
            .useCase(new ChangeAUseCase())
            .execute(1)
            .then(() => transactionContext.useCase(new ChangeAUseCase()).execute(2))
            .then(() => transactionContext.useCase(new ChangeAUseCase()).execute(3))
            .then(() => transactionContext.useCase(new ChangeAUseCase()).execute(4))
            .then(() => transactionContext.useCase(new ChangeAUseCase()).execute(5))
            .then(() => {
                // commit the result to StoreGroup
                transactionContext.commit();
            });
    })
    .then(() => {
        // finish the transation
        console.log(onChangeCount); // => 1
    });
```

åå‰ã®é€šã‚Šå¤§é‡ã®UseCaseã‚’é€£ç¶šã—ã¦å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹éš›ã«åˆ©ç”¨ã§ãã¾ã™ã€‚
åˆæœŸç”»é¢ã«å¿…è¦ãªUseCaseãŒè¤‡æ•°ãŒã‚ã‚‹ãŒã€ãã®é€”ä¸­ã§ä½•åº¦ã‚‚Viewã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒãªã„ã¨ã„ã£ãŸéš›ã«ã€ä¸€ã¤ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã¾ã¨ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¾‹ãˆã°Reactã«ã‚‚[ReactDOM.unstable_batchedUpdates](https://github.com/facebook/react/issues/10231#issuecomment-316644950 "ReactDOM.unstable_batchedUpdates")ã¨ã„ã†éš ã—APIã¿ãŸã„ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ãŒã€ãã†ã„ã†ã®ã‚’Stateç®¡ç†å´ã§ã‚„ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã§ã™ã€‚

Reduxã«ã‚‚ä¼¼ãŸã‚ˆã†ãªBatch updatingã®ä»•çµ„ã¿ã‚’æŒã£ãŸmiddlewareãŒã‚ã‚Šã¾ã™ã€‚

- [Idea: Batching actions Â· Issue #542 Â· reactjs/redux](https://github.com/reactjs/redux/issues/542)
- [acdlite/redux-batched-updates: Batch React updates that occur as a result of Redux dispatches, to prevent cascading renders. See https://github.com/gaearon/redux/issues/125 for more details.](https://github.com/acdlite/redux-batched-updates)

Alminã®`Context#transaction`ã¯strict modeã˜ã‚ƒãªã„ã¨æ­£ã—ãå‹•ãã¾ã›ã‚“ã€‚
ç°¡å˜ã«ã„ã†ã¨ã€Alminã®ç¯„å›²å¤–ã§StoreãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã¨ãã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒæ­£ã—ãã¦ã‚‚çµæœãŒæ­£ã—ããªã„ã“ã¨ãŒãŠã“ã‚‹ã®ã§ãã†ã„ã†ã‚±ãƒ¼ã‚¹ã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã§ã™ã€‚

- [almin: Transaction of UseCase Â· Issue #219 Â· almin/almin](https://github.com/almin/almin/issues/219 "almin: Transaction of UseCase Â· Issue #219 Â· almin/almin")

ç¾åœ¨ã®å®Ÿè£…ã¯1ã¤ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§1å›ã®`commit()`ã¾ãŸã¯`exit()`ã®ã¿ãŒã§ãã¾ã™ã€‚`exit()`ã—ãŸå ´åˆã¯ãã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§å®Ÿè¡Œã—ãŸUseCaseã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç ´æ£„ã—ã¾ã™ã€‚

ã¾ãŸã€ä»Šã¯ã‚ã‚‹UseCaseã®ä¸­ã‹ã‚‰`commit()`ã—ãŸã„ï¼ã‚„ã‚µãƒ–ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚ˆã†ãªæ¦‚å¿µã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**Stability**: Experimentalãªã®ã§ãã®è¾ºã«æ„è¦‹ã‚ã‚‹äººã¯æ„è¦‹ãã ã•ã„ã€‚

### Add Fluent style `executor` #193 

- **Stability**: Experimental
- This feature is subject to change. It may change or be removed in future versions.
- See #193 

TypeScriptã§`UseCase#execute`ã‚’ã™ã‚‹éš›ã«å‹ãƒã‚§ãƒƒã‚¯ãŒã¡ã‚ƒã‚“ã¨ã§ãã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ã€‚

```js
context.useCase(new MyUseCase())
    .executor(useCase => useCase.execute("test"))
    .then(value => {
        console.log(value);
    });
```

`context.useCase(useCase).execute()`ã¯`context.useCase(useCase).executor(useCase => useCase.execute())`ã®ç³–è¡£æ§‹æ–‡ã§ã™ã€‚

ã‚‚ã£ã¨ã“ã†ã—ãŸæ–¹ãŒã‚ˆã•ãã†ã¨ã„ã†æ„è¦‹ãŒã‚ã‚‹å ´åˆã¯æ¬¡ã®Issueã«æ„è¦‹ã‚’ãã ã•ã„ã€‚

- [UseCase: Fluent style UseCase Â· Issue #193 Â· almin/almin](https://github.com/almin/almin/issues/193 "UseCase: Fluent style UseCase Â· Issue #193 Â· almin/almin")


## Documentation

APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã®ã§ <https://almin.js.org/> ã‚’ã¿ã¦ãã ã•ã„ã€‚

## Almin-logger

- [almin-logger@5.0.0](https://github.com/almin/almin/releases/tag/almin-logger%405.0.0 "almin-logger@5.0.0")ã¯ Almin 0.13.x ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

## Internals

[JavaScriptã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å¾ã€…ã«TypeScriptã«ç§»è¡Œã™ã‚‹ | Web Scratch](https://efcl.info/2017/07/17/JavaScript-to-TypeScript/ "JavaScriptã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å¾ã€…ã«TypeScriptã«ç§»è¡Œã™ã‚‹ | Web Scratch")ã§æ›¸ã„ãŸã‚ˆã†ã«Alminã®ãƒ†ã‚¹ãƒˆã‚’TypeScriptã«å°‘ã—ã¥ã¤ç§»è¡Œã—ã¦ã„ã¾ã™ã€‚

ã¾ã å…¨éƒ¨ã¯ç§»è¡Œã§ãã¦ãªã„ã®ã§ã€Pull Requestå¾…ã£ã¦ã¾ã™ï¼

## Notes ğŸ“ 

### Unit of Work

Almin 0.13ã‹ã‚‰[UnitOfWork](https://github.com/almin/almin/blob/master/packages/almin/src/UnitOfWork/UnitOfWork.ts "UnitOfWork")ã¨ã„ã†å†…éƒ¨çš„ãªã‚¯ãƒ©ã‚¹ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚
ç°¡å˜ã«ã„ã†ã¨é€šå¸¸ã¯UseCaseã®å®Ÿè¡Œã‚’ãã®ã¾ã¾Storeã«æµã—ã¦ãã‚Œã¾ã™ãŒã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³æ™‚ã¯UseCaseã®å®Ÿè¡Œã‚’æ­¢ã‚ãŸã‚Šé€²ã‚ãŸã‚Šã§ãã‚‹ã‚‚ã®ã§ã™ã€‚

`Context#transaction`ã¯ã“ã‚Œã®ä¸Šã«ä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

[![Unit of Work](https://user-images.githubusercontent.com/19714/28418164-c121b12a-6d95-11e7-90e8-057ad12b6620.png)
](http://www.nomnoml.com/#view/%23padding%3A%2010%0A%0A%5BUseCase%7C%0A%20%20%20%20%5BUseCase%20Executor%20A%7C%0A%20%20%20%20%20%20%20%20%5B%3Cusecase%3EChild%20UseCase%5D%0A%20%20%20%20%5D%20--%3E%20%5BUseCase%20Executor%20B%5D%0A%20%20%20%20%5BUseCase%20Executor%20B%7C%0A%20%20%20%20%20%20%20%20%5B%3Cusecase%3EUseCase%5D%0A%20%20%20%20%5D%0A%5D%0A%5BUnit%20of%20Work%7C%0A%20%20%20%20%5BCommitments%7C%0A%20%20%20%20%20%20%20%20%5BDispatched%20Payload%5D%0A%20%20%20%20%20%20%20%20%5BSystem%20Payload%5D%0A%20%20%20%20%5D%0A%5D%0A%5BStoreGroup%7C%0A%20%20%20%20%5BStore%5D%0A%20%20%20%20%5B%3Cnote%3Eif%20any%20store%20is%20change%2C%20it%20emit%20changed%5D%0A%5D%0A%5BUseCase%5D%20payload%20--%3E%20%5BLifeCycleEventHub%7C%0A%09%5BDispatcher%5D%0A%5D%0A%5BUseCase%5D%20payload%20--%3E%20%5B%3Creadonly%3EUnit%20of%20Work%5D%0A%5BUnit%20of%20Work%5D%20%3Ctransaction%20event%3E%20--%3E%20%5BLifeCycleEventHub%5D%0A%5BUnit%20of%20Work%5D%20Commitment%20--%3E%20%5BStoreGroup%5D%20%0A%5BStoreGroup%5D%20changes%20--%3E%20%5BLifeCycleEventHub%5D%0A%5BLifeCycleEventHub%5D%20%3C-%20%5BContext%5D%0A "nomnoml")

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«TypeScript + Alminã§ã®TodoMVCã®å®Ÿè£…ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

- [almin/examples/todomvc-typescript at master Â· almin/almin](https://github.com/almin/almin/tree/master/examples/todomvc-typescript "almin/examples/todomvc-typescript at master Â· almin/almin")

[JavaScriptç‰ˆ](https://github.com/almin/almin/tree/master/examples/todomvc)ã‚„[FlowTypeç‰ˆ](https://github.com/almin/almin/tree/master/examples/todomvc-flow)ãªã©ã‚‚ã‚ã‚Šã¾ã™ã€‚

å€‹äººçš„ã«ã¯[shopping-cart](https://github.com/almin/almin/tree/master/examples/shopping-cart "shopping-cart")ã®æ–¹ãŒã‚‰ã—ãæ›¸ã‘ã¦ã„ã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚


è§¦ã£ã¦ã¿ã¦ä½•ã‹ãŠã‹ã—ãªã‚µãƒ³ãƒ—ãƒ«ãŒã‚ã‚‹å¯èƒ½æ€§ã¯ã‚ã‚‹ã®ã§ã€ãã®ã¨ãã¯Issueã‚’ç«‹ã¦ã¦ãã ã•ã„ã€‚

- [example: update svg-feeling's postcss config Â· Issue #256 Â· almin/almin](https://github.com/almin/almin/issues/256 "example: update svg-feeling&#39;s postcss config Â· Issue #256 Â· almin/almin")

ã‚‚ã£ã¨å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çš„ãªã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãŸã„å ´åˆã¯[Faao](https://github.com/azu/faao "Faao")ãªã©ã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚
ã“ã‚Œã¯ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ™ãƒ«æ„Ÿã§æ›¸ã„ã¦ã„ã‚‹ã®ã§ã€ãã“ãã“è¤‡é›‘ã§ã™ã€‚

- [azu/faao: Faao is a GitHub issue/pull-request client on Electron.](https://github.com/azu/faao)
- [Faao - ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã§ä½œã‚‹GitHub Issue Client -](http://azu.github.io/slide/2017/teppeis-sushi/client-side-ddd-on-github.html)

## ãŠã‚ã‚Š

[Almin](https://github.com/almin/almin "Almin")ã¯å¤§æŠµã®äººãŒèª­ã‚“ã§åˆ†ã‹ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã‚‹ã‚ˆã†ã«ãƒ‡ã‚¶ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ã€‚
ã‚ã‚Šãµã‚ŒãŸã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã‚‹ã®ã‚‚ãã†ã§ã™ãŒã€
[react-redux](https://github.com/reactjs/react-redux "react-redux")ã®`connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])`ã¿ãŸã„ã«ã„ããªã‚Šå³ã—ã„æ„Ÿã˜ã«ãªã£ãŸã—ãªã„ã‚ˆã†ã«æ°—ã‚’ã¤ã‘ã¦ã„ã¾ã™ã€‚

[Redux](https://github.com/reactjs/redux "Redux")ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚å……å®Ÿã—ã¦ã‚‹ã—ã€ã‚„ã£ã±ã‚ŠåŸºç›¤çš„ãªéƒ¨åˆ†ã¯ã‚ˆãã§ãã‚‹ã¦ã‚‹ã®ã§Reduxã‚‚ã¡ã‚ƒã‚“ã¨ç†è§£ã—ãŸæ–¹ãŒã„ã„ã¨æ€ã„ã¾ã™ã€‚ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚„æ‹¡å¼µéƒ¨åˆ†ãŒè¤‡é›‘ã«ãªã£ãŸã‚Šã—ã¦ã‚‹ã ã‘ã§ã‚³ã‚¢ã¯ã—ã£ã‹ã‚Šã—ã¦ã¾ã™ã€‚

- [Redux Â· JavaScript Plugin Architecture](https://azu.gitbooks.io/javascript-plugin-architecture/content/ja/Redux/ "Redux Â· JavaScript Plugin Architecture")

Alminã¯[Reduxã‚„Fluxã®ã‚ˆã†ãªã“ã¨](https://almin.js.org/docs/tutorial/counter/)ã‚‚ã§ãã¾ã™ãŒã€ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã©ã†æ‰±ã†ã‹ã¨ã„ã†éƒ¨åˆ†ã«ç„¦ç‚¹ã‚’ç½®ã„ã¦ã„ã¾ã™ã€‚
é€†ã‚’ã„ãˆã°ã€AlminãŒæ‰±ã‚ãªã„é ˜åŸŸ(ãƒ‰ãƒ¡ã‚¤ãƒ³/ã‚¤ãƒ³ãƒ•ãƒ©)ã¨æ‰±ã†é ˜åŸŸ(ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼/Viewã®é€£æº)ã‚’ã¯ã£ãã‚ŠåŒºåˆ¥ã™ã‚‹ã¨ã„ã†ã“ã¨ã«ã¤ãªãŒã‚Šã¾ã™ã€‚

ãŸã¨ãˆã°ã€Fluxã ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³(ãƒ­ã‚¸ãƒƒã‚¯)ã‚’ã©ã“ã«ç½®ãã‹ã‚’è€ƒãˆã‚‹ã¨ã€Storeã®ä¸­ã‚’æ§‹é€ åŒ–ã—ã¦ã„ãã“ã¨ã«ãªã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚

- [Fluxã¨DDDã®çµ±åˆæ–¹æ³• - ã‹ã¨ã˜ã‚…ã‚“ã®æŠ€è¡“æ—¥èªŒ](http://blog.j5ik2o.me/entry/2016/09/09/200643)
- [Reduxã«ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã‚’å°å…¥ã™ã‚‹ - Qiita](http://qiita.com/Takepepe/items/1ce54a9564d5a6d4939d)
- [Fluxã¨DDD(ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ãŸ - embryo](http://embryo.hatenadiary.com/entry/2016/12/16/011446)

![Flux](https://efcl.info/wp-content/uploads/2017/07/24-1500900273.png)

Storeã®ä¸­ã ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³å´ãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®éƒ½åˆã«å¼•ã£å¼µã‚‰ã‚Œã¦ã—ã¾ã„ãŒã¡ã§ã™ã€‚(å¼·ã„æ„å¿—ãŒå¿…è¦)
ãªã®ã§ã€Alminã¯æ‰±ã†é ˜åŸŸã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã¿ã«ã—ã¦ã€ãã®ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ãªã©ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã§æ‰±ã†é ˜åŸŸã¨ã—ã¦ã„ã¾ã™ã€‚

![Almin](https://efcl.info/wp-content/uploads/2017/07/24-1500900453.png)

ã“ã®æ§‹é€ ã«ã‚ˆã£ã¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯PureãªJavaScriptã¨ã—ã¦æ›¸ã‘ã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚
ã“ã®è¾ºã«ã¤ã„ã¦ã¯æ¬¡ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§æ›¸ã„ã¦ã„ã¾ã™ã€‚

- [è¤‡é›‘ãªJavaScriptã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è€ƒãˆãªãŒã‚‰ä½œã‚‹è©±](http://azu.github.io/slide/2016/react-meetup/large-scale-javascript.html)
- [azu/large-scale-javascript: è¤‡é›‘ãªJavaScriptã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ãŸã‚ã«è€ƒãˆã‚‹ã“ã¨](https://github.com/azu/large-scale-javascript)
- [Faao - ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã§ä½œã‚‹GitHub Issue Client -](http://azu.github.io/slide/2017/teppeis-sushi/client-side-ddd-on-github.html "Faao - ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã§ä½œã‚‹GitHub Issue Client -")

å®Ÿéš›ã«[ã‚ã‚‹ç¨‹åº¦ã®è¦æ¨¡æ„Ÿ](http://niconare.nicovideo.jp/watch/kn2499)ã®ã‚‚ã®ã‚‚ã¡ã‚ƒã‚“ã¨æ›¸ã‘ã‚‹ã‚ˆã†ã§ã™ã€‚

ä»Šå¾Œã®äºˆå®šã¨ã—ã¦ã¯ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å‘¨ã‚Šã‚’ã‚‚ã†å°‘ã—è€ƒãˆãŸã„ã®ã¨ã€çµå±€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸­ã¨ã—ã¦ä¸Šæ‰‹ãã§ãã¦ã„ã¦ã‚‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã§ä¸Šæ‰‹ãå‹•ãã‹ã¯åˆ¥ãªã®ã§ãã®è¾ºã‚’ä¸Šæ‰‹ããƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã§ãã‚‹ä»•çµ„ã¿ã‚’è€ƒãˆãŸã„æ°—ãŒã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€Alminã®UseCaseå®Ÿè£…ã‹ã‚‰[ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’è‡ªå‹•ç”Ÿæˆ](https://azu.github.io/faao/meta/use-case.html "Faao - UseCase architecture")ã¨ã‹ã¯ç¾å®Ÿçš„ã«ã§ãã¾ã™ã€‚ã“ã®ã‚ˆã†ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒç›®æŒ‡ã™ã¹ãæ§‹é€ ã‹ã‚‰ãšã‚Œã¦ã„ãªã„ã‹ã‚’å¯è¦–åŒ–ã§ããŸã‚Šãƒã‚§ãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ãªä»•çµ„ã¿ã‚’æä¾›ã§ãã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ›¸ãã“ã¨ã«é›†ä¸­ã§ãã¦ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒç¶­æŒã—ã‚„ã™ã„ã®ã§ã¯ãªã„ã‹ãªã¨æ€ã£ãŸã‚Šã—ã¾ã™ã€‚


ãã†ã„ã†è¦–ç‚¹ã®Contributeã‚‚å¾…ã£ã¦ã¾ã™ã—ã€ãã‚Œã¨ã¯åˆ¥ã«PRãŒé€ã‚Šã‚„ã™ãã†ãªIssueã¯`Good for beginners`ãƒ©ãƒ™ãƒ«ãŒä»˜ã‘ã¦ã‚ã‚Šã¾ã™ã€‚

- [`Good for beginners`: Issues Â· almin/almin](https://github.com/almin/almin/issues?q=is%3Aissue+is%3Aopen+label%3A%22Good+for+beginners%22 "Issues Â· almin/almin")
