---
title: "GitHubãªã©ã§ä½¿ãˆã‚‹:+1:ã™ã‚‹ãƒãƒƒã‚¸ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã£ãŸ"
author: azu
layout: post
categories:
  - webã‚µãƒ¼ãƒ“ã‚¹
tags:
  - GitHub
  - Issue
  - WebService
  - Node.js
  - Heroku
---

# [Voting Badge](http://azu.github.io/voting-badge/ "Voting Badge")

[![Vote++](https://voting-badge.herokuapp.com/img?url=https://github.com/azu/voting-badge)](https://voting-badge.herokuapp.com/vote?url=https://github.com/azu/voting-badge)

GitHub Issueã§è³›æˆãªã©ã‚’ `:+1:` ã¨æ›¸ã„ã¦ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã“ã¨ãŒè‰¯ãã‚ã‚Šã¾ã™ã€‚
æŠ•ç¥¨ãƒœã‚¿ãƒ³çš„ãªæ©Ÿèƒ½ã¨ã—ã¦ãã†ã„ã†ã®ãŒæ¬²ã—ã‹ã£ãŸã®ã§ã€Travis CIã®ãƒãƒƒã‚¸ã®ã‚ˆã†ã«è¡¨ç¤º+æŠ•ç¥¨ã§ãã‚‹ãƒœã‚¿ãƒ³ã‚’ä½œã‚Šã¾ã—ãŸã€‚

- [:+1: Voting Badge](http://azu.github.io/voting-badge/ ":1: Voting Badge")

ä¸Šè¨˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦URL(å®Ÿã¯ã‚­ãƒ¼ãªã‚‰ä½•ã§ã‚‚ã„ã„)ã‚’æ›¸ãã¨ãƒãƒƒã‚¸ã®URLã‚’ä½œã£ã¦ãã‚Œã¾ã™ã€‚

img + link ã¨ã„ã†ã‚ˆãè¦‹ã‚‹ãƒãƒƒã‚¸ã®ä»•çµ„ã¿ã¨åŒã˜ã§ã™ã€‚

## ãªãœä½œã£ãŸã‹

æœ€è¿‘ãƒ–ãƒ­ã‚°ã‚’GitHub Pagesã«ç§»å‹•ã—ãŸãŸã‚ã€
ã“ã‚Œã‹ã‚‰æ›¸ãäºˆå®šã®è¨˜äº‹å€™è£œã‚’GitHub Issueã‚’ã¤ã‹ã£ã¦ç®¡ç†ã—ã¯ã˜ã‚ã¦ã„ã¾ã—ãŸã€‚

* [Issues Â· efcl/efcl.github.io](https://github.com/efcl/efcl.github.io/labels/%E8%A8%98%E4%BA%8B%E5%80%99%E8%A3%9C "Issues Â· efcl/efcl.github.io")

ã—ã‹ã—ã€[è¨˜äº‹å€™è£œ](https://github.com/efcl/efcl.github.io/labels/%E8%A8%98%E4%BA%8B%E5%80%99%E8%A3%9C "Issues Â· efcl/efcl.github.io")ã«éœ€è¦ãŒã‚ã‚‹ã®ã‹ã€
ã‚ˆãã‚ã‹ã‚‰ãªã„ã®ã§ç°¡å˜ãªæŠ•ç¥¨æ©Ÿèƒ½ãŒæ¬²ã—ã„ãªãƒ¼ã¨æ€ã£ãŸã®ãŒå§‹ã¾ã‚Šã§ã™(ã‚³ãƒ¡ãƒ³ãƒˆã¯æ•·å±…é«˜ã„)

ã¾ãŸã€[shields.io](http://shields.io/ "shields.io")ã¯ãƒãƒƒã‚¸ã‚’ä½œã£ã¦ãã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ãŒã€
ã“ã‚Œã‚’è¦‹ãŸæ™‚ã«URLã¨æŠ•ç¥¨æ•°ã®é–¢ä¿‚ã‚’ç®¡ç†ã™ã‚‹ã‚µãƒ¼ãƒã ã‘ã‚’ä½œã£ã¦ã€ç”»åƒã®ç”Ÿæˆãªã©ã¯[shields.io](http://shields.io/ "shields.io")ã«ã¾ã‹ã›ã¦ã—ã¾ãˆã°ã€
æ„å¤–ã¨ç°¡å˜ã«+1ãƒãƒƒã‚¸ãŒä½œã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã¨æ€ã£ãŸã®ã‚‚è¦å› ã§ã™ã€‚

GitHubã®è¦æœ›ã¨ã—ã¦æ—¢ã«åŒæ§˜ã®ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

- [Add explicit `+1` feature for issues that isn&#39;t a comment Â· Issue #9 Â· isaacs/github](https://github.com/isaacs/github/issues/9 "Add explicit `+1` feature for issues that isn&#39;t a comment Â· Issue #9 Â· isaacs/github").

ã—ã‹ã—å®Ÿè£…ã•ã‚Œãªã•ãã†ãªæ°—ãŒã—ã¦ã‚‹ã®ã§ã€ã¨ã‚Šã‚ãˆãšä½œã£ã¦ã¿ã‚‹ã‹ã¨ã„ã†æ„Ÿã˜ã§ä½œã‚Šã¾ã—ãŸã€‚

## LevelDB

http://shields.io/ ãŒNodeãªã®ã§ã€åˆã‚ã›ã¦Nodeã§æ›¸ãã¨ã—ã¦ã€
ä¿å­˜ã™ã‚‹å€¤ã¯ URL ã¨ æŠ•ç¥¨æ•° ã¨ã„ã†ã ã‘ã¨ã„ã†ã‚·ãƒ³ãƒ—ãƒ«ãªæ„Ÿã˜ã§è‰¯ã‹ã£ãŸã®ã§ã€KVSã§é©å½“ãªã®ä½¿ãŠã†ã¨ã—ã¾ã—ãŸã€‚

ãã“ã§ä½•ã¨ãªãæ°—ã«ãªã£ã¦ãŸ[LevelDB](https://code.google.com/p/leveldb/ "LevelDB")ãŒä½¿ã„ãŸããªã£ãŸã®ã§ã€
[rvagg/node-levelup](https://github.com/rvagg/node-levelup "rvagg/node-levelup")ã‚’ä½¿ã„ã¾ã—ãŸã€‚

## ä»•çµ„ã¿(åˆä»£)

ä»•çµ„ã¿ã¯å‡„ãã‚·ãƒ³ãƒ—ãƒ«ã§ã€ä»¥ä¸‹ã®2ã¤ã®APIã‚’å®Ÿè£…ã™ã‚‹ã ã‘ã§ã—ãŸã€‚

* `/vote?url=xxx` ã§+1æŠ•ç¥¨
* `/img?url=xxx` ã§ãƒãƒƒã‚¸ç”»åƒã‚’URLã‚’è¿”ã™

imgã§ã¯ã€shields.ioã®ãƒãƒƒã‚¸ç”»åƒã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’æ›¸ã‘ã‚‹ã¨ã„ã†ã‹ãªã‚Šãšã‚‹ã„ä½œã‚Šã«ã—ã¦ã¾ã—ãŸã€‚

``` javascript
"https://img.shields.io/badge/Vote:+1:-" + count + "-red.svg?style=flat"
```

`/img` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ãã®urlã«å¯¾ã™ã‚‹countã‚’ä½¿ã£ãŸãƒãƒƒã‚¸URLã‚’è¿”ã™ã¨ã„ã†æ„Ÿã˜ã§ã™ã­ã€‚

![](https://img.shields.io/badge/Vote:+1:-100-red.svg?style=flat)

## Heroku

ã©ã“ã«ç½®ãã®ã‹ã‚‚è€ƒãˆãšã«å®Œæˆã—ã¦ã€ãã†ã„ãˆã°[Heroku](https://dashboard.heroku.com/ "Heroku")ã¯
Node.jså¯¾å¿œã—ã¦ãŸäº‹ã‚’æ€ã„å‡ºã—ãŸã®ã§Herokuã«ãŠãã“ã¨ã«ã—ã¾ã—ãŸã€‚

LevelDBã¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®DBãªã®ã§ã€ç‰¹ã«è¨­å®šãªã©ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

å¾Œã¯[Procfile](https://github.com/azu/voting-badge/blob/master/Procfile "Procfile")ã‚’ä½œã£ã¦pushã™ã‚‹ã ã‘ã§ãƒ­ãƒ¼ã‚«ãƒ«ã¨åŒã˜ã‚ˆã†ã«å‹•ãã¾ã—ãŸã€‚

ã¨æ€ã£ãŸã‚‰ã€Herokuèµ·å‹•ã™ã‚‹åº¦ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¯ã¾ã£ã•ã‚‰ã«ãªã‚‹ã®ã§ã€
æ°¸ç¶šåŒ–ã™ã‚‹ã«ã¯åˆ¥é€”ã‚¢ãƒ‰ã‚ªãƒ³ã‚„å¤–éƒ¨ã«ä¿å­˜ã—ãªã„ã¨è¡Œã‘ãªã„ã“ã¨ã«æ°—ä»˜ãã¾ã—ãŸã€‚

ãã—ã¦ã€Herokuã§LevelDBã‚’å˜ç´”ã«æ°¸ç¶šåŒ–ã™ã‚‹æ–¹æ³•ã¯ãªã•ãã†ã ã£ãŸã®ã§è«¦ã‚ã¾ã—ãŸã€‚

## Redis

Herokuã§ã¯Redisãªã©ã¯ã‚¢ãƒ‰ã‚ªãƒ³ãŒç„¡æ–™ã§ä½¿ãˆã¦ã€ã“ã¡ã‚‰ã¯æ°¸ç¶šåŒ–ãŒç°¡å˜ã«ã§ããã†ã ã£ãŸã®ã§ã€
Redisç‰ˆã®å®Ÿè£…ã‚’æ›¸ãã¾ã—ãŸã€‚

ã›ã£ã‹ããªã®ã§ã€LevelDB,Redisã®ä¸Šã«ã‚‚ã†ä¸€å±¤è»½ã„ãƒ©ãƒƒãƒ‘ã‚’ä½œã£ã¦
åŒã˜APIã§åŒã˜ã‚ˆã†ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã€LevelDBã€Redisã©ã¡ã‚‰ã§ã‚‚ã†ã”ã‹ã›ã‚‹ã‚ˆã†ã«ã—ã¦ã¾ã—ãŸã€‚

![api-wrapper](http://efcl.info/wp-content/uploads/2014/07/redis-leveldb-api.png)

* [voting-badge/lib/backend at master Â· azu/voting-badge](https://github.com/azu/voting-badge/tree/master/lib/backend "voting-badge/lib/backend at master Â· azu/voting-badge")

ã“ã‚Œã§pushã—ã¦æ°¸ç¶šåŒ–ãŒã§ããŸã®ã§ã€å®Œæˆï¼

ã§ã¯ãªãã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ™‚é–“ãŒç•°æ§˜ã«é•·ã„ã¨ã„ã†GitHubç‰¹æœ‰ã®å•é¡Œã«é­é‡ã—ã¾ã—ãŸã€‚

## ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å•é¡Œ

* [Aggressive image caching breaks image badges Â· Issue #224 Â· github/markup](https://github.com/github/markup/issues/224 "Aggressive image caching breaks image badges Â· Issue #224 Â· github/markup")
* [Proxying User Images](https://github.com/blog/1766-proxying-user-images "Proxying User Images")

GitHubã®READMEã‚„Issueç­‰ã«è²¼ã£ãŸç”»åƒã¯åŸºæœ¬çš„ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸç”»åƒã«å·®ã—æ›¿ãˆã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

shields.ioã®ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒã‚¸ã ã¨ã€æ™®é€šã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã—ã¾ã£ã¦å…¨ç„¶æ›´æ–°ã•ã‚Œãªã„ãƒãƒƒã‚¸ãŒå‡ºæ¥ä¸ŠãŒã‚Šã¾ã™ã€‚
(1æ—¥ãã‚‰ã„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹?)

`Cache-Control: no-cache` ã¨ Expires, Last-Modified or Etag ã‚ãŸã‚Šã‚’ã¡ã‚ƒã‚“ã¨è¨­å®šã™ã‚Œã°ã€
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œãªããªã‚Šã¾ã™ãŒã€
shields.io ã®ç”»åƒã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã¦ã‚‹ã ã‘ã ã£ãŸã®ã§ã‚³ãƒ³ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã›ã‚“ã§ã—ãŸã€‚

## è‡ªå‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚³ãƒ³ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã«ã¯ã€Herokuã‹ã‚‰ãƒãƒƒã‚¸(svg)ã‚’ç›´æŽ¥é…å¸ƒã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

shields.ioã®ãƒªãƒã‚¸ãƒˆãƒªã‚’è¦‹ã¦ã„ãŸã‚‰ã€ãƒãƒƒã‚¸ã‚’ä½œæˆã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå…¬é–‹ã•ã‚Œã¦ã‚‹äº‹ã«æ°—ä»˜ãã¾ã—ãŸã€‚

* [badges/shields](https://github.com/badges/shields "badges/shields")

[node-canvas](https://github.com/Automattic/node-canvas "node-canvas") (cairo)ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒçµæ§‹è¾›ã„æ„Ÿã˜ã§ã—ãŸãŒã€
Herokuã§å‹•ã‹ã™è¨­å®šã‚‚è¼‰ã£ã¦ã„ãŸã®ã§ã€è‡ªåˆ†ã§ãƒãƒƒã‚¸ã‚’ä½œæˆã™ã‚‹ã‚ˆã†ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚

* [Installation on Heroku Â· Automattic/node-canvas Wiki](https://github.com/Automattic/node-canvas/wiki/Installation-on-Heroku "Installation on Heroku Â· Automattic/node-canvas Wiki")

ã“ã‚Œã§è‡ªåˆ†ã®ã¨ã“ã‚ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿”ã™ã®ã§ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚³ãƒ³ãƒˆãƒ¼ãƒ«ã‚‚ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

## ãŠã‚ã‚Šã«

ã¾ã ã€ä½•ã‹ä»¥ä¸‹ã®å¿ƒé…ç‚¹ãŒã‚ã‚Šã¾ã™ãŒã€ä¸€å¿œ +1 ãƒãƒƒã‚¸ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚

* Herokuã®ç„¡æ–™ã‚µãƒ¼ãƒã§ä¸Šæ‰‹ãå‹•ãç¶šã‘ã‚‹ã®åˆ†ã‹ã‚‰ãªã„ã€‚
* ä½•ã‹å¾®å¦™ã«GitHubã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã‚‹æ°—ãŒã™ã‚‹â€¦
* DejaVu Sansã‚’Herokuã«ãŠã„ã¦ã„ã„ã®ã‹ã‚ˆãåˆ†ã‹ã‚‰ãªã„ãŸã‚ã€é©å¿œã—ã¦ãªã„
    * ãã®ãŸã‚ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒæ€ªã—ã„æ„Ÿã˜
    * ðŸ‘ã‚’è¡¨ç¤ºã—ãŸã„ã‘ã©svgã ã¨è¡¨ç¤ºç’°å¢ƒä¾å­˜ã«ãªã£ã¦ä¸ä¾¿

ã‚µãƒ³ãƒ—ãƒ«ãƒœã‚¿ãƒ³ => [![Vote++](https://voting-badge.herokuapp.com/img?url=https://github.com/azu/voting-badge)](https://voting-badge.herokuapp.com/vote?url=https://github.com/azu/voting-badge)
