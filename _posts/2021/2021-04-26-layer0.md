---
title: "Jamstackãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®Layer0ã¸Next.jsã®ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãªãŒã‚‰è©¦ã™"
author: azu
layout: post
date : 2021-04-26T14:36
category: JavaScript
tags:
    - JavaScript
    - Next.js
    - Jamstack

---

[Layer0](https://www.layer0.co/)ã¨ã„ã†[Jamstack](https://jamstack.org/)ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’è©¦ã—ã¦ã¿ãŸè¨˜äº‹ã§ã™ã€‚
[Jamstack](https://jamstack.org/)ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãŒä½•ã‹ã¯è¡¨ç¾ã—ã«ãã„ã§ã™ãŒã€[Netlify](https://www.netlify.com/)ã€[Vercel](https://vercel.com)ã€[Cloudflare Pages](https://pages.cloudflare.com/)ã¿ãŸã„ãªSPAãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ãã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

- [Cloudflare Pagesãƒ»Vercel ãƒ»Netlify ã®é•ã„ã‚„ä½¿ã„åˆ†ã‘ã‚’ã¾ã¨ã‚ã‚‹](https://zenn.dev/catnose99/scraps/6780379210136f)

[Layer0](https://www.layer0.co/)ã¯Moovweb XDNã¨ã„ã†åå‰ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã—ãŸãŒã€2021å¹´4æœˆã«Layer0ã¸ãƒªãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ã¾ã™ã€‚

ğŸ“ [XDN = Experience Delivery Network](https://www.red5pro.com/blog/introducing-xdn-experience-delivery-network/)

- [Moovweb is officially Layer0!](https://www.layer0.co/post/moovweb-is-officially-layer0)

[Layer0](https://www.layer0.co/)ã¯ã€[Netlify](https://www.netlify.com/)ã€[Vercel](https://vercel.com)ã€[Cloudflare Pages](https://pages.cloudflare.com/)ã®ã‚ˆã†ã«SPAã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã§ãã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚
ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨åŒã˜ã‚ˆã†ã«ãƒ–ãƒ©ãƒ³ãƒã§ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã€A/B ãƒ†ã‚¹ãƒˆã€Lambdaã‚’ä½¿ã£ãŸserverlessãªAPIã‚’ä½œã‚Œã¦ã€Web Vitalã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½¿ã£ãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚
ã¾ãŸã€Fastlyãƒ™ãƒ¼ã‚¹ã®CDNä¸Šã«JavaScriptã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚„Cookieæ“ä½œãªã©ã®ãƒ—ãƒ­ã‚­ã‚·å‡¦ç†ã‚’ã‹ã‘ã‚‹[EdgeJS](https://www.layer0.co/edgejs)ã¨ã„ã†ä»•çµ„ã¿ã‚’ã‚‚ã£ã¦ã„ã¾ã™ã€‚

è»½ãè§¦ã£ã¦ã¿ãŸæ„Ÿè§¦ã§ã¯ã€æ¬¡ã®ã‚ˆã†ãªVercelç­‰ã¨[Cloudflare Workers](https://workers.cloudflare.com/)ã®ä¸­é–“ãã‚‰ã„ã®å°è±¡ã‚’å—ã‘ã¾ã—ãŸã€‚

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">My first impression of Layer0( <a href="https://t.co/bXXYp5eTYK">https://t.co/bXXYp5eTYK</a> )<br><br>/w Vercel/Netlify/Cloudflare Workers <a href="https://t.co/Sd1RDyq0YY">pic.twitter.com/Sd1RDyq0YY</a></p>&mdash; azu (@azu_re) <a href="https://twitter.com/azu_re/status/1385757601472729088?ref_src=twsrc%5Etfw">April 24, 2021</a></blockquote>

<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 

[Netlify](https://www.netlify.com/)ã€[Vercel](https://vercel.com)ã€[Cloudflare Pages](https://pages.cloudflare.com/)(Pagesã®å®Ÿä½“ã¯Workersãªã®ã§å°‘ã—ç‰¹æ®Š)ã¯SPAã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹æ–¹å‘ã«ã‚ˆã£ã¦ã„ã‚‹æ„Ÿã˜ãŒã—ã¾ã™ã€‚ãã“ã¸ServerlessãªFunctionå¯¾å¿œã‚„ISRãªã©ã§è‰²ã€…ãªç”¨é€”ã«å¯¾å¿œã—ã¦ã„ãæ„Ÿã˜ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

ä¸€æ–¹ã§ã€[Cloudflare Workers](https://workers.cloudflare.com/)ã¯ã‚¹ã‚¿ãƒ¼ãƒˆãŒCDNã§ã€CDNä¸Šã§JavaScriptã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ã‹ã›ã‚‹ã®ã§è‡ªç”±åº¦ãŒã‚‚ã®ã™ã”ãé«˜ã„ã§ã™ã€‚
ã—ã‹ã—ã€æ—¢å­˜ã®Node.jsã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¯ä½¿ã„ã«ãã„ãŸã‚ä½œã‚Šè¾¼ã¿ãŒå¿…è¦ã ã£ãŸã‚Šã€ç”¨é€”ãŒé™å®šçš„ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚
Cloudflare Workersã«ã¤ã„ã¦ã¯æ¬¡ã®è¨˜äº‹ã§ã‚‚æ›¸ã„ã¦ã„ã¾ã™ã€‚ã¾ãŸã€Cloudflareã‚‚[Node.js support in Cloudflare Workers](https://blog.cloudflare.com/node-js-support-cloudflare-workers/)ã¨ã„ã†è¨˜äº‹(ã“ã‚Œã¯webpackã§bundleã™ã‚‹ã®ã§pure jsãªnpmãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯å‹•ãã‚ˆã¨ã„ã†è©±ã‚’æ›¸ã„ãŸã‚Šã—ã¦ã„ã‚‹ã®ã§ã€ã“ã®è¾ºã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®å•é¡Œã¯èªè­˜ã—ã¦ã„ã‚‹æ„Ÿã˜ãŒã—ã¾ã™ã€‚

- [Next.js + Vercel + Cloudflare Workers KV + Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒˆã‚·ãƒ¼ãƒˆã§å¯„ä»˜ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã£ãŸ | Web Scratch](https://efcl.info/2021/03/12/next.js-vercel-cloudflare-workers-kv/)

æœ€è¿‘ã§ãŸ[Deno Deploy](https://deno.com/deploy)ã‚‚[Cloudflare Workers](https://workers.cloudflare.com/)ã¨ä¼¼ãŸç³»çµ±ã®Edgeã§å‹•ãã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚æ¬¡ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§ã‚‚æ¯”è¼ƒã—ã¦ã„ã¾ã™ã€‚

- [ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã¨å¯„ä»˜ã¨æ…ˆå–„æ´»å‹•ã¨](https://azu.github.io/slide/2021/open-philanthropy/open-philanthropy.html)

[Layer0](https://www.layer0.co/)ã¯ã€[Netlify](https://www.netlify.com/)ã‚„[Vercel](https://vercel.com)ãŒæŒã£ã¦ã„ã‚‹åŸºæœ¬çš„ãªæ©Ÿèƒ½ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹æ„Ÿã˜ã§ã™ã€‚

- [GitHubé€£æºã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤](https://docs.layer0.co/guides/deploying)
- [Stagingã‚„Productionã®ã‚ˆã†ãªè¤‡æ•°ã®ç’°å¢ƒ](https://docs.layer0.co/guides/environments)
- Netlifyã®A/Bãƒ†ã‚¹ãƒˆã¨åŒã˜[Split Testing](https://docs.layer0.co/guides/split_testing)
- [Next.jsã®ISRã€ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚‚ISRå¯¾å¿œ](https://docs.layer0.co/guides/isg)
- [Web Vitalsã‚’ä½¿ã£ãŸRUM](https://docs.layer0.co/guides/core_web_vitals)
- [`layer0 dev`](https://docs.layer0.co/guides/cli)ã§ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒãƒƒã‚°
  - ã“ã®ã‚³ãƒãƒ³ãƒ‰ã®é¢ç™½ã„ã¨ã“ã‚ã¯`--cache`ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ã§è©¦ã›ã‚‹
- [React(Next.js)ã€Vue(Nuxt.js)ã€Angular](https://docs.layer0.co/guides/overview#section_react__vue__and_angular)ãªã©ã®å„ç¨®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å¯¾å¿œ
  - å¾Œè¿°ã™ã‚‹CDNãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚„Service Workeré€£æºã®ãŸã‚ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹

ã¾ãŸã€[Cloudflare Workers](https://workers.cloudflare.com/)ã¨ä¼¼ãŸå½¢ã§ã€Fastlyãƒ™ãƒ¼ã‚¹ã®CDNä¸Šã§Cookieæ“ä½œ/ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ“ä½œ/Proxyå‡¦ç†ã¨ã„ã£ãŸç°¡å˜ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’JavaScriptã§ã‹ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

- [Layer0 Documentation - Routing](https://docs.layer0.co/guides/routing)

ã“ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å‡¦ç†(`route.ts`)ãŒç‰¹å¾´çš„ã§ã€[Cloudflare Workers](https://workers.cloudflare.com/)ã»ã©ã®è‡ªç”±åº¦ã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å¯¾ã™ã‚‹å‡¦ç†ã‚’JavaScriptã§æ›¸ã‘ã¾ã™ã€‚
ãã®ãŸã‚ã€Fastlyã®[VCL](https://docs.fastly.com/en/guides/guide-to-vcl)ã®ã‚ˆã†ãªãƒ­ã‚¸ãƒƒã‚¯ãŒJavaScriptã§æ›¸ã‘ã¾ã™ã€‚

```js
// https://docs.layer0.co/guides/routing#section_route_execution ã®ã‚µãƒ³ãƒ—ãƒ«
const { Router } = require('@layer0/core/router')
const { nextRoutes } = require('@layer0/next')

// In this example a request to /products/1 will be cached by the first route, then served by the `nextRoutes` middleware
module.exports = new Router()
  .get('/products/:id', ({ cache }) => {
    cache({
      edge: { maxAgeSeconds: 60 * 60, staleWhileRevalidateSeconds: 60 * 60 },
    })
  })
  .use(nextRoutes)
```

ğŸ“ Layer0ã®è£å´ãŒFastlyã ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§æ˜è¨€ã¯ã•ã‚Œã¦ãªã„ã§ã™ãŒã€ã‚¨ãƒ©ãƒ¼æ™‚ã«FastlyãŒè¦‹ãˆã‚‹ã“ã¨ã€[Sub-Processors](https://www.layer0.co/sub-processors)ã€[Fastly Partner](https://www.fastly.com/partners/find-a-partner)ãªã©ã‹ã‚‰ãã†ã ã¨åˆ¤æ–­ã—ã¦ã„ã¾ã™ã€‚

ãŸã¨ãˆã°ã€Netlifyã‚„Vercelãªã©ã§ã¯ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼ã‚’ã‹ã‘ã‚‹ã®ã¯æœ‰æ–™ãƒ—ãƒ©ãƒ³ã‚„Functionsã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ä¸€æ–¹ã§ã€Layer0ã¯Routingãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦CDNä¸Šã§ã¡ã‚‡ã£ã¨ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå‹•ãã®ã§ã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼ã‚’è¿½åŠ ã§ãã¾ã™ã€‚
(Cloudflare Workersã‚‚ã“ã®è¾ºãŒå®Œå…¨ã«JavaScriptã®ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦è¡¨ç¾ã§ãã‚‹ã®ã§ã€è‡ªç”±ã«ã‹ã‘ã‚‰ã‚Œã¾ã™)

```js
const { Router } = require('@layer0/core/router')
module.exports = new Router().requireBasicAuth({
  username: process.env.BASIC_AUTH_USERNAME,
  password: process.env.BASIC_AUTH_PASSWORD,
});
```

ğŸ“ ã“ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒã©ã®ã‚ˆã†ã«å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‹ã¯èª¿ã¹ã¦ã¾ã›ã‚“ãŒã€webpackã§bundleã—ã¦ã„ã¦Node.jsã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è‡ªä½“ã¯å‹•ã‹ãªã„ã‚ˆã†ã§ã—ãŸã€‚
ãã®ãŸã‚Cloudflare Workersã®ã‚ˆã†ãªPure JSã«è¿‘ã„ã‚‚ã®ã‚’å‹•ã‹ã—ã¦ã„ã‚‹ or DSLã¨ã—ã¦JSã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã ã¨æ€ã„ã¾ã™ã€‚

ãã®ä»–ã«ã¯ã€Service Workerã¨é€£æºã—ãŸPrefetchingã®ã‚µãƒãƒ¼ãƒˆãŒåšã‚ã«å…¥ã£ã¦ã„ãŸã‚Šã€ãã‚Œã‚’ãƒ‡ãƒãƒƒã‚°ã™ã‚‹[Devtools](https://docs.layer0.co/guides/devtools#section_devtools)ãªã‚“ã‹ã‚‚é¢ç™½ã„æ„Ÿã˜ã§ã™ã€‚

- [Moovweb XDN - What is XDN DevTools - YouTube](https://www.youtube.com/watch?v=4AYQAvkc0UY)

ã‚ã¨ã¯ã€æœ€è¿‘ã®Jamstackã§ã¯å·¨å¤§ãªã‚µã‚¤ãƒˆã ã¨ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒå•é¡Œã¨ãªã‚‹ãŸã‚ã€[Incremental Static Regeneration](https://nextjs.org/docs/basic-features/data-fetching#incremental-static-regeneration)(ISR)ã‚„[Distributed Persistent Rendering](https://www.netlify.com/blog/2021/04/14/distributed-persistent-rendering-a-new-jamstack-approach-for-faster-builds/)(DPR)ãªã©ãŒã‚ã‚Šã¾ã™ãŒã€Layer0ã¯ISRã¨Prerenderingã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

- [Layer0 Documentation - Incremental Static (Re)Generation](https://docs.layer0.co/guides/isg)
- [Layer0 Documentation - Static Prerendering](https://docs.layer0.co/guides/static_prerendering)

æ¬¡ã®å‹•ç”»ã§ã‚‚ã“ã®è¾ºã®ãƒ“ãƒ«ãƒ‰ã®ã‚¹ã‚±ãƒ¼ãƒ«ã«ã¤ã„ã¦è©±ã—ã¦ã„ã¾ã™ã€‚

- [Tech: eCommerce, JamStack, CDN - YouTube](https://www.youtube.com/watch?v=lks9SIXpFrE)

ğŸ“ ã‚‚ã¨ã‚‚ã¨ã€Jamstackã®[Distributed Persistent Rendering (DPR) Â· Discussion #549 Â· jamstack/jamstack.org](https://github.com/jamstack/jamstack.org/discussions/549#discussioncomment-621672)ã®è­°è«–ã§ã€Layer0ã®äººãŒå‡ºã¦ããŸã®ã§ã€ãã“ã‚’èµ·ç‚¹ã«èª¿ã¹ã¦ã¯ã˜ã‚ã¾ã—ãŸã€‚

- https://github.com/jamstack/jamstack.org/discussions/549#discussioncomment-621672

## ç°¡å˜ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Layer0ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹

[JSer.info](https://jser.info/)ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’å…¨æ–‡æ¤œç´¢ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Layer0ã§å‹•ã‹ã—ã¦ã¿ã¾ã—ãŸã€‚

- URL: [JSer.info Archive Search](https://azu-jser-info-search-default.layer0.link/)
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰: <https://github.com/jser/jser.info/tree/gh-pages/layer0>

Next.jsã¨Next.jsã®APIã‚’ä½¿ã£ã¦ã‚·ãƒ³ãƒ—ãƒ«ã«å·¨å¤§ãªJSONã‚’ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªæ¤œç´¢ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
åˆæœŸè¡¨ç¤ºã¯SSRã§30ã‚³ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’æç”»ã—ã¦ã€å…¥åŠ›ã™ã‚‹ã“ã¨ã«APIã‚’å©ã„ã¦ãƒãƒƒãƒã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’æç”»ã™ã‚‹ã ã‘ã§ã™ã€‚

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr"><a href="https://t.co/TYYYLueDuq">https://t.co/TYYYLueDuq</a><br>Layer0 + Next.jsã§ <a href="https://t.co/CXy3hOXJ8q">https://t.co/CXy3hOXJ8q</a> ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’å…¨æ–‡æ¤œç´¢ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ä½œã£ãŸã€‚<br><br>ã‚³ãƒ¼ãƒ‰ã¯ä½•ã‚‚å·¥å¤«ã—ã¦ãªã„ã‚„ã¤ã ã‘ã©ã€ã“ã®é€Ÿåº¦ã§å‹•ãã®é¢ç™½ã„ãªãƒ¼<a href="https://t.co/MPPFp6ildj">https://t.co/MPPFp6ildj</a> <a href="https://t.co/5JlpmC0at0">pic.twitter.com/5JlpmC0at0</a></p>&mdash; azu (@azu_re) <a href="https://twitter.com/azu_re/status/1385988297520910338?ref_src=twsrc%5Etfw">April 24, 2021</a></blockquote>

<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 

æ®†ã©ãã®ã¾ã¾ãªæ„Ÿã˜ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ãŒã€Documentã¯30ms~50msãã‚‰ã„ã§è¿”ã£ã¦ãã¾ã™ã€‚
æ¤œç´¢ã™ã‚‹APIã¯åæ•°MBã®JSONã‹ã‚‰ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªæ¤œç´¢ã™ã‚‹å˜ç´”ãªã‚„ã¤ã§ã™ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã ã¨10m~30msãã‚‰ã„ã§è¿”ã‚‹ã®ãŒã€Layer0ã ã¨300~400msãã‚‰ã„ã§è¿”ã£ã¦ãã¾ã™ã€‚

ã¾ãŸã€ç®¡ç†ç”»é¢ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®Hit RateãŒè¦‹ã‚ŒãŸã‚Šã™ã‚‹ã®ãŒã€[Fastly Partner](https://www.fastly.com/partners/find-a-partner)ã ãªãƒ¼ã£ã¦æ„Ÿã˜ãŒã—ã¦é¢ç™½ã„ã§ã™ã€‚

![Cache Hit](https://efcl.info/wp-content/uploads/2021/04/layer-0-cache-hit.png)

ä»Šå›ã¯ç‰¹ã«ãªã«ã‚‚ã—ã¦ãªã„ã§ã™ãŒã€Service Workerã§ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒã®çµ„ã¿è¾¼ã¿ã¨ã‹ã€CDNã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ‰‹å‹•ã§å‰Šé™¤ã—ãŸã‚Šã€ãƒ‡ãƒ—ãƒ­ã‚¤ã”ã¨ã®CDNã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç¶­æŒã§ããŸã‚Š(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æ¶ˆãˆã‚‹)ã¨çµæ§‹ç´°ã‹ã„ã“ã¨ãŒã§ãã‚‹ãŒé¢ç™½ã„ã¨ã“ã‚ã§ã™ã€‚
ã“ã®è¾ºã¯[Netlify](https://www.netlify.com/)ã‚„[Vercel](https://vercel.com)ã‚ˆã‚Šã‚‚ã€Cloudflareãªã©ã®CDNã‚ˆã‚Šãªæ„Ÿã˜ãªæ°—ãŒã—ã¾ã™ã€‚

- [Layer0 Documentation - Caching](https://docs.layer0.co/guides/caching)

### å°å…¥æ–¹æ³•

æœ€è¿‘ãƒªãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã—ãŸã‹ã‚‰ã‹ã¡ã‚‡ã“ã¡ã‚‡ã“å‹•ã‹ãªã„ã¨ã“ã‚ãŒã‚ã£ãŸã‚Šã™ã‚‹ã®ã§ã€
ã“ã®è¨˜äº‹ã§æ›¸ã„ã¦ã‚‚ã™ãå¤ããªã‚Šãã†ãªã®ã§ã€å°å…¥æ–¹æ³•ã¯å…¬å¼ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [Layer0 Documentation - Getting Started](https://docs.layer0.co/guides/getting_started)

åŸºæœ¬çš„ã«ã¯Next.jsã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã£ã¦ã€`layer0 init` ã‚’ã™ã‚‹ã¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãªã©ã‚’åˆ¤å®šã—ã¦ã„ã„æ„Ÿã˜ã«`layer0.config.js`ã¨`routes.ts`ã‚’ä½œæˆã—ã¦ãã‚Œã¾ã™ã€‚

```
npm i -g @layer0/cli
layer0 init
```

ğŸ“ `layer0.config.js`ã§`routes`ã¨`connector`ã«`@layer0/next`ã‚’è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã€‚(è©¦ã—ãŸã¨ãã¯`init`ã ã¨å£Šã‚Œã¦ã¦`npm create layer0-app`ã®æ–¹ã‚’å‚è€ƒã«ã—ãŸ)
https://github.com/jser/jser.info/blob/b693e00da423faae6e21b3601755cca4f1247075/layer0/layer0.config.js#L2-L3

ã‚ã¨ã¯ `layer0 deploy` ã™ã‚‹ã ã‘ã§å‹•ãã¾ã™ã€‚

```
layer0 deploy
```

GitHubé€£æºã¯ã€GitHub Ationsã‹ã‚‰`layer0 deploy`ç›¸å½“ã®ã“ã¨ã‚’ã‚„ã£ã¦ã„ã‚‹ã ã‘ã§ã™ã€‚
(ã“ã®è¾ºã¯GitHub Appã¨ã‹ãŒä»Šå¾Œã§ããŸã‚Šã™ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚)

- <https://github.com/jser/jser.info/blob/gh-pages/.github/workflows/layer0.yaml>
- [Layer0 Documentation - Deploying](https://docs.layer0.co/guides/deploying#section_github_actions)

ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ã¨ãã¯ã€`layer0 dev`ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¨Layer0ã®`Route.ts`ãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒã¨Next.jsã®ã‚¢ãƒ—ãƒªãŒç«‹ã¡ä¸ŠãŒã£ã¦ã€
ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒã®æ–¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã ã‘ã§ã™ã€‚(ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã‹é–¢ä¿‚ãªã„ãªã‚‰Next.jsã®ã‚¢ãƒ—ãƒªã‚’ç›´æ¥è¦‹ã¦ã‚‚å•é¡Œãªã•ãã†)

```
layer0 dev
```

- <https://github.com/jser/jser.info/blob/b693e00da423faae6e21b3601755cca4f1247075/layer0/package.json#L3-L9>

serverless([`pages/api`](https://github.com/jser/jser.info/tree/gh-pages/layer0/pages/api))ã®æ–¹ã¯ã€ä½•ã‚‚ã—ãªãã¦ã‚‚å‹•ã„ãŸã®ã§ã€ç‰¹ã«èª¿ã¹ã¦ã¾ã›ã‚“ã€‚

- [Layer0 Documentation - Regions](https://docs.layer0.co/guides/regions#section_serverless_compute)

## ãŠã‚ã‚Šã«

[Layer0](https://www.layer0.co/)ã‚’ç°¡å˜ã«è©¦ã—ãŸã®ã§ã€ãã®æ„Ÿæƒ³ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚

ã¾ã ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„çŸ¥è¦‹ãªã©ãŒå°‘ãªã„ãŸã‚ã€[Netlify](https://www.netlify.com/)ã‚„[Vercel](https://vercel.com)ã¨åŒã˜ãƒ¬ãƒ™ãƒ«ã®ç°¡å˜ã•ã§ã¯ãªã„ã§ã™ãŒã€æ©Ÿèƒ½çš„ã«ã¯éœè‰²ãªã„ã¨æ€ã„ã¾ã™ã€‚

ã¾ãŸã€Netlifyã‚„Vercelã§ã¯æ‰‹ãŒå±Šã‹ãªã„éƒ¨åˆ†/Cloudflare Workersã§ã¯æ‰‹ã‚’å…¥ã‚Œãªã„ã¨ä½¿ã„ã«ãã„éƒ¨åˆ†ãŒã€[Routing](https://docs.layer0.co/guides/routing#section_routing)ã¨ã„ã†å½¢ã§ã‚ã‚‹ç¨®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’æ±ºã‚ãŸå½¢ã§ä½¿ãˆã‚‹ã®ãŒã¡ã‚‡ã†ã©ã‚ˆã„æ„Ÿè¦šã§ã™ã€‚

ã“ã®è¾ºã®ã‚µãƒ¼ãƒ“ã‚¹ã¯æœ€è¿‘ç«¶äº‰ãŒç››ã‚“ãªã®ã§ã€ä½•ã‹ãƒ™ã‚¹ãƒˆãªã®ã‹ã¯é›£ã—ã„ã§ã™ãŒã€è©¦ã—ã¦ã¿ã‚‹ã¨é¢ç™½ã„ã‚µãƒ¼ãƒ“ã‚¹ã ã¨æ€ã„ã¾ã—ãŸã€‚

- [Is the Moovweb XDN a Netlify or Vercel alternative? - Layer0 Q&A - Layer0 Community](https://forum.layer0.co/t/is-the-moovweb-xdn-a-netlify-or-vercel-alternative/132)

(2021-04-26æ™‚ç‚¹) æ–™é‡‘ãƒ—ãƒ©ãƒ³ã¯Community($0)/Hyper($500)/Enterpriseã®3æ®µéšã§ã€ãƒ‰ãƒ¡ã‚¤ãƒ³æ•°ä»¥å¤–ã¯Communityã§ã‚‚ååˆ†ä½¿ãˆãã†ãªæ„Ÿã˜ãŒã—ã¾ã™ã€‚

- [Pricing | Layer0](https://www.layer0.co/pricing)

Open Source Projectså‘ã‘ã®ãƒ—ãƒ©ãƒ³ã‚‚ã‚ã‚‹ã¿ãŸã„ã®ã§ã€ã‚‚ã£ã¨ä½¿ã†å ´åˆã¯èã„ã¦ã¿ã‚‹ã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
